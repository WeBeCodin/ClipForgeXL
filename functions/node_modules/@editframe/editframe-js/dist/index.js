"use strict";function e(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(t){if(Array.isArray(t))return e(t)}function n(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function r(e,t,n,r,i,o,a){try{var u=e[o](a);var s=u.value}catch(e){n(e);return}if(u.done){t(s)}else{Promise.resolve(s).then(r,i)}}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var a=e.apply(t,n);function u(e){r(a,i,o,u,s,"next",e)}function s(e){r(a,i,o,u,s,"throw",e)}u(undefined)})}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function u(e,t,n){if(t)a(e.prototype,t);if(n)a(e,n);return e}function s(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function l(e){l=Object.setPrototypeOf?Object.getPrototypeOf:function e(e){return e.__proto__||Object.getPrototypeOf(e)};return l(e)}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)g(e,t)}function f(e,t){if(t!=null&&typeof Symbol!=="undefined"&&t[Symbol.hasInstance]){return!!t[Symbol.hasInstance](e)}else{return e instanceof t}}function d(e){if(typeof Symbol!=="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function y(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};var r=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}r.forEach(function(t){s(e,t,n[t])})}return e}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);if(t){r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})}n.push.apply(n,r)}return n}function h(e,t){t=t!=null?t:{};if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(t))}else{p(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function m(e,t){if(t&&(T(t)==="object"||typeof t==="function")){return t}return n(e)}function g(e,t){g=Object.setPrototypeOf||function e(e,t){e.__proto__=t;return e};return g(e,t)}function b(e){return t(e)||d(e)||_(e)||y()}var T=function(e){"@swc/helpers - typeof";return e&&typeof Symbol!=="undefined"&&e.constructor===Symbol?"symbol":typeof e};function _(t,n){if(!t)return;if(typeof t==="string")return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e(t,n)}function w(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}function K(e){var t=w();return function n(){var n=l(e),r;if(t){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else{r=n.apply(this,arguments)}return m(this,r)}}var L=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),"throw":u(1),"return":u(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(e){return function(t){return s([e,t])}}function s(o){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(i=o[0]&2?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;if(r=0,i)o=[o[0]&2,i.value];switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:false};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){a=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(o[0]===6&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}if(i[2])a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}};var x=Object.create;var k=Object.defineProperty;var S=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var A=Object.getPrototypeOf,D=Object.prototype.hasOwnProperty;var F=function(e,t){return function(){return t||e((t={exports:{}}).exports,t),t.exports}},O=function(e,t){for(var n in t)k(e,n,{get:t[n],enumerable:!0})},I=function(e,t,n,r){var i=true,o=false,a=undefined;if(t&&typeof t=="object"||typeof t=="function")try{var u=function(){var i=l.value;!D.call(e,i)&&i!==n&&k(e,i,{get:function(){return t[i]},enumerable:!(r=S(t,i))||r.enumerable})};for(var s=E(t)[Symbol.iterator](),l;!(i=(l=s.next()).done);i=true)u()}catch(e){o=true;a=e}finally{try{if(!i&&s.return!=null){s.return()}}finally{if(o){throw a}}}return e};var P=function(e,t,n){return n=e!=null?x(A(e)):{},I(t||!e||!e.__esModule?k(n,"default",{value:e,enumerable:!0}):n,e)},z=function(e){return I(k({},"__esModule",{value:!0}),e)};var R=F(function(e,t){"use strict";var n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,a=function(e,t){for(var r in t)n(e,r,{get:t[r],enumerable:!0})},u=function(e,t,a,u){var s=true,l=false,c=undefined;if(t&&typeof t=="object"||typeof t=="function")try{var f=function(){var i=y.value;!o.call(e,i)&&i!==a&&n(e,i,{get:function(){return t[i]},enumerable:!(u=r(t,i))||u.enumerable})};for(var d=i(t)[Symbol.iterator](),y;!(s=(y=d.next()).done);s=true)f()}catch(e){l=true;c=e}finally{try{if(!s&&d.return!=null){d.return()}}finally{if(l){throw c}}}return e},s=function(e){return u(n({},"__esModule",{value:!0}),e)},l={};a(l,{AudioKey:function(){return eB},Color:function(){return f},CompositionKey:function(){return y},ConfigKey:function(){return N},DefaultAudio:function(){return eq},DefaultAudioOptions:function(){return H},DefaultHtmlOptions:function(){return M},DefaultLottieOptions:function(){return X},DefaultPosition:function(){return k},DefaultPositionOptions:function(){return x},DefaultSize:function(){return I},DefaultSizeOptions:function(){return O},DefaultSubtitlesOptions:function(){return G},DefaultTextOptions:function(){return eL},DefaultTimeline:function(){return R},DefaultTimelineOptions:function(){return z},DefaultTransitions:function(){return e6},DefaultTrim:function(){return C},DefaultTrimOptions:function(){return U},DefaultWaveformOptions:function(){return ej},DimensionsKey:function(){return d},EasingType:function(){return tr},EffectKey:function(){return tu},EffectName:function(){return to},EffectOptionKey:function(){return ta},FilterKey:function(){return th},FilterName:function(){return tv},FilterOptionKey:function(){return tp},FontStyleValue:function(){return eT},FontWeightValue:function(){return eb},FormatValue:function(){return D},HtmlKey:function(){return V},HtmlPageKey:function(){return W},LayerConfigDefaults:function(){return eC},LayerDefaults:function(){return eU},LayerHorizontalAlignmentValue:function(){return T},LayerKey:function(){return B},LayerType:function(){return q},LayerVerticalAlignmentValue:function(){return _},LottieKey:function(){return Y},OptimisticCanvasDefaultSize:function(){return c},PositionKey:function(){return w},SizeKey:function(){return F},SubtitlesKey:function(){return J},TextAlignValue:function(){return ei},TextBaseline:function(){return Q},TextHorizontalPositionValue:function(){return eo},TextKey:function(){return eK},TextPositionToAlignItems:function(){return e_},TextPositionToJustifyContent:function(){return ew},TextVerticalPositionValue:function(){return ea},TimelineKey:function(){return P},TransitionKey:function(){return e5},TransitionOptionKey:function(){return e4},TransitionType:function(){return e$},TrimKey:function(){return j},VideoExtensions:function(){return v},WaveformKey:function(){return eR},WaveformStyleValue:function(){return ez},XPositionToJustifyContent:function(){return K},YPositionToAlignItems:function(){return L}});t.exports=s(l);var c=1e4,f=function(e){return e.black="#000000FF",e.transparent="transparent",e.white="#FFFFFFFF",e}(f||{}),d=function(e){return e.height="height",e.width="width",e}(d||{}),y=function(e){return e.backgroundColor="backgroundColor",e.dimensions="dimensions",e.duration="duration",e.extension="extension",e.filename="filename",e.files="files",e.fps="fps",e.layers="layers",e.metadata="metadata",e.thumbnail="thumbnail",e}(y||{}),v=function(e){return e.mov="mov",e.mp4="mp4",e.webm="webm",e}(v||{}),p="bottom",h="top",m="center",g="left",b="right",T={center:m,left:g,right:b},_={bottom:p,center:m,top:h},w=function(e){return e.angle="angle",e.angleX="angleX",e.angleY="angleY",e.isRelative="isRelative",e.origin="origin",e.x="x",e.y="y",e.z="z",e}(w||{}),K={center:"center",left:"flex-start",right:"flex-end"},L={bottom:"flex-end",center:"center",top:"flex-start"},x={angle:0,angleX:0,angleY:0,isRelative:!1,origin:m,x:0,y:0,z:0},k={position:x},S="fill",E="fit",A="stretch",D={fill:S,fit:E,stretch:A},F=function(e){return e.format="format",e.height="height",e.scale="scale",e.width="width",e}(F||{}),O={format:void 0,height:void 0,scale:1,width:void 0},I={size:O},P=function(e){return e.start="start",e}(P||{}),z={start:0},R={timeline:z},j=function(e){return e.end="end",e.start="start",e}(j||{}),U={end:void 0,start:0},C={trim:U},B=function(e){return e.audio="audio",e.filter="filter",e.effect="effect",e.html="html",e.id="id",e.lottie="lottie",e.position="position",e.size="size",e.subtitles="subtitles",e.source="source",e.text="text",e.timeline="timeline",e.transitions="transitions",e.trim="trim",e.type="type",e.waveform="waveform",e.wordCount="wordCount",e}(B||{}),q=function(e){return e.audio="audio",e.effect="effect",e.filter="filter",e.group="group",e.html="html",e.image="image",e.lottie="lottie",e.sequence="sequence",e.subtitles="subtitles",e.text="text",e.video="video",e.waveform="waveform",e}(q||{}),N=function(e){return e.backgroundColor="backgroundColor",e.dimensions="dimensions",e.duration="duration",e.extension="extension",e.fps="fps",e.layers="layers",e.metadata="metadata",e.shouldWatermark="shouldWatermark",e}(N||{}),H={volume:1,normalize:!1},V=function(e){return e.page="page",e.selector="selector",e.url="url",e.withTailwind="withTailwind",e.withTransparentBackground="withTransparentBackground",e.framesDirectory="framesDirectory",e.framesCount="framesCount",e}(V||{}),W=function(e){return e.body="body",e.styles="styles",e}(W||{}),M={page:void 0,selector:void 0,url:void 0,withTailwind:!1,withTransparentBackground:!1},Y=function(e){return e.assets="assets",e.ddd="ddd",e.fonts="fonts",e.fr="fr",e.h="h",e.ip="ip",e.layers="layers",e.markers="markers",e.meta="meta",e.nm="nm",e.op="op",e.v="v",e.w="w",e}(Y||{}),X={},J=function(e){return e.backgroundColor="backgroundColor",e.color="color",e.fontSize="fontSize",e}(J||{}),G={backgroundColor:"#000000FF",color:"#FFFFFFFF",fontSize:32},Q=function(e){return e.alphabetic="alphabetic",e.bottom="bottom",e.hanging="hanging",e.ideographic="ideographic",e.middle="middle",e.top="top",e}(Q||{}),Z="bottom",$="center",ee="justify",et="left",en="right",er="top",ei={center:$,justify:ee,left:et,right:en},eo={center:$,left:et,right:en},ea={bottom:Z,center:$,top:er},eu="bold",es="italic",el="normal",ec=100,ef=200,ed=300,ey=400,ev=500,ep=600,eh=700,em=800,eg=900,eb={_100:ec,_200:ef,_300:ed,_400:ey,_500:ev,_600:ep,_700:eh,_800:em,_900:eg,bold:eu,normal:el},eT={italic:es,normal:el},e_={bottom:"flex-end",center:"center",top:"flex-start"},ew={center:"center",left:"flex-start",right:"flex-end"},eK=function(e){return e.backgroundColor="backgroundColor",e.backgroundTransform="backgroundTransform",e.border="border",e.borderRadius="borderRadius",e.color="color",e.fontFamily="fontFamily",e.fontSize="fontSize",e.fontStyle="fontStyle",e.fontWeight="fontWeight",e.lineHeight="lineHeight",e.padding="padding",e.tailwind="tailwind",e.text="text",e.textAlign="textAlign",e.textDecoration="textDecoration",e.textPosition="textPosition",e.textTransform="textTransform",e.textStroke="textStroke",e.textFillColor="textFillColor",e.textShadow="textShadow",e}(eK||{}),eL={backgroundColor:"transparent",backgroundTransform:"none",border:"none",borderRadius:0,color:"#FFFFFFFF",fontFamily:"Helvetica",fontSize:100,fontStyle:"normal",fontWeight:400,lineHeight:1.2,padding:16,tailwind:void 0,text:"Your Text Here...",textAlign:ei.left,textDecoration:"none",textPosition:void 0,textTransform:"none",textFillColor:void 0,textStroke:void 0,textShadow:void 0},ex="bars",ek="barsVertical",eS="bricks",eE="curve",eA="equalizer",eD="line",eF="pixel",eO="roundBars",eI="wave",eP="waveSmooth",ez={bars:ex,barsVertical:ek,bricks:eS,curve:eE,equalizer:eA,line:eD,pixel:eF,roundBars:eO,wave:eI,waveSmooth:eP},eR=function(e){return e.backgroundColor="backgroundColor",e.color="color",e.secondaryColor="secondaryColor",e.data="data",e.style="style",e.numberOfFrames="numberOfFrames",e.waveforms="waveforms",e}(eR||{}),ej={backgroundColor:"transparent",color:"#FFFFFFFF",style:ez.bars},eU={audio:H,html:M,lottie:X,subtitles:G,text:eL,waveform:ej},eC={audio:H,position:x,size:O,timeline:z,transitions:[],trim:U},eB=function(e){return e.volume="volume",e.normalize="normalize",e}(eB||{}),eq={audio:H},eN="crossfadeIn",eH="crossfadeOut",eV="fadeIn",eW="fadeOut",eM="kenBurns",eY="angle",eX="angleX",eJ="angleY",eG="scale",eQ="x",eZ="y",e$={crossfadeIn:eN,crossfadeOut:eH,fadeIn:eV,fadeOut:eW,kenBurns:eM,angle:eY,angleX:eX,angleY:eJ,scale:eG,x:eQ,y:eZ},e0="duration",e1="easing",e2="time",e3="value",e4={duration:e0,easing:e1,time:e2,value:e3},e5=function(e){return e.duration="duration",e.options="options",e.type="type",e}(e5||{}),e6={transitions:[]},e7="easeIn",e8="easeInOut",e9="easeOut",te="elasticIn",tt="elasticInOut",tn="elasticOut",tr={easeIn:e7,easeInOut:e8,easeOut:e9,elasticIn:te,elasticInOut:tt,elasticOut:tn},ti="normalize",to={normalize:ti},ta=function(e){return e.normalize="normalize",e}(ta||{}),tu=function(e){return e.name="name",e.options="options",e}(tu||{}),ts="brightness",tl="contrast",tc="grayscale",tf="lighten",td="negative",ty="saturation",tv={brightness:ts,contrast:tl,grayscale:tc,lighten:tf,negative:td,saturation:ty},tp=function(e){return e.brightness="brightness",e.contrast="contrast",e.grayscale="grayscale",e.saturation="saturation",e}(tp||{}),th=function(e){return e.name="name",e.options="options",e}(th||{})});var j={};O(j,{CommonResolutions:function(){return rZ},Editframe:function(){return rQ}});module.exports=z(j);var U="https://api.editframe.com";var C=P(require("audio-extensions")),B=P(require("image-extensions")),q=P(require("video-extensions"));var N={_1080p:{height:1080,width:1920},_1080pVertical:{height:1920,width:1080},_1080x1080:{height:1080,width:1080},_720p:{height:720,width:1080},_720pVertical:{height:1080,width:720},_720x720:{height:720,width:720}};var H={applications:{all:"/applications",get:"/applications/:id"},metadata:"/metadata",videos:{all:"/videos",create:"/videos",get:"/videos/:id",new:"/videos/new"},flows:{all:"/flows",run:"/flows/run",get:"/flows/:id"},ws:{auth:"/broadcasting/auth"},assets:"/assets"};var V=P(R());var W=s({},V.EffectName.normalize,s({},V.EffectOptionKey.normalize,"boolean"));var M={name:void 0,options:void 0},Y={effect:M};var X;var J=(X={},s(X,V.FilterName.brightness,s({},V.FilterOptionKey.brightness,"number")),s(X,V.FilterName.contrast,s({},V.FilterOptionKey.contrast,"number")),s(X,V.FilterName.saturation,s({},V.FilterOptionKey.saturation,"number")),X);var G={name:void 0,options:void 0},Q={filter:G};var Z=[V.LayerType.audio,V.LayerType.video];var $=[V.LayerType.html,V.LayerType.image,V.LayerType.lottie,V.LayerType.text,V.LayerType.video,V.LayerType.waveform];var ee=[V.LayerType.html,V.LayerType.image,V.LayerType.lottie,V.LayerType.text,V.LayerType.video,V.LayerType.waveform];var et=[V.LayerType.audio,V.LayerType.html,V.LayerType.image,V.LayerType.lottie,V.LayerType.text,V.LayerType.video,V.LayerType.waveform];var en=[V.LayerType.audio,V.LayerType.html,V.LayerType.image,V.LayerType.lottie,V.LayerType.text,V.LayerType.video,V.LayerType.waveform];var er=[V.LayerType.audio,V.LayerType.html,V.LayerType.image,V.LayerType.lottie,V.LayerType.text,V.LayerType.video,V.LayerType.waveform];var ei="./.preview",eo="".concat(ei,"/config.json"),ea="9876";var eu=P(require("camelcase-keys")),es=P(require("cross-fetch"));var el={requestUnsuccessful:function(e,t){return"".concat(e," - ").concat(t)}};var ec={get:function(e){return"Error getting applications: ".concat(e)},malformedResponse:"malformed `applications` response"};var ef=P(require("chalk")),ed={tokenRequired:"\\".concat(ef.default.white("token"),"\\ must be provided to constructor")};var ey=P(require("chalk")),ev={all:function(e){return"Error getting flows: ".concat(e)},get:function(e){return"Error getting flow: ".concat(e)},malformedResponse:"malformed `flow` response",new:function(e){return"Error creating new flow: ".concat(e)},malformedEncodingResponse:"malformed `flow` response",invalidDeliverables:"invalid `deliverables` object",optionsRequired:"\\".concat(ey.default.white("options"),"\\ must be provided"),jobsRequired:"\\".concat(ey.default.white("jobs"),"\\ must be provided"),jobsNotEmpty:"\\".concat(ey.default.white("jobs"),"\\ you must added at least a job")};var ep=P(require("chalk")),eh={FILE_DOES_NOT_EXIST:function(e){return"\\".concat(ep.default.white(e),"\\ is not a valid path")},INVALID_COLOR:function(e,t,n){return"\\".concat(ep.default.white(t)," attribute in \\").concat(ep.default.white(e),"\\ is not a valid color. Got \\").concat(ep.default.white(n),"\\")},INVALID_OPTIONS:function(e,t,n){return"\n  \\".concat(ep.default.white("options"),"\\ attribute in \\").concat(ep.default.white(e),"\\ should contain keys \\").concat(ep.default.white(JSON.stringify(t)),"\\. Got: \\").concat(ep.default.white(JSON.stringify(n)),"\\")},INVALID_URL:function(e){return"\\".concat(ep.default.white(e),"\\ is not valid url")},INVALID_VIDEO_EXTENSION:function(e,t,n){return"\n  \\".concat(ep.default.white(e),"\\ attribute should contain one of these keys \\").concat(ep.default.white(JSON.stringify(t)),"\\. Got: \\").concat(ep.default.white(JSON.stringify(n)),"\\")},MUST_BE_TYPE:function(e,t,n,r){return"\n  \\".concat(ep.default.white(t),"\\ attribute in \\").concat(ep.default.white(e),"\\ must be of type \\").concat(ep.default.white(r),"\\. Got: \\").concat(ep.default.white(JSON.stringify(n)),"\\")},OR:function(e){return e.join(" | ")},REQUIRED_FIELD:function(e){return"\\".concat(ep.default.white(e),"\\ field is required")},SUB_FIELD:function(e,t){return"".concat(e,": { ").concat(t," }")},TWO_TRANSITIONS_REQUIRED:function(e,t){return"Only one transition of type \\".concat(ep.default.white(e),"\\ has been added to layer of type \\").concat(ep.default.white(t),"\\. There must be at least two transitions added in order to interpolate between the transition values")},INVALID_FLOW_TYPE:function(e){return"\\".concat(ep.default.white(e),"\\ is not valid url")},INVALID_TRIM_VALUE_GREATER_THAN_DURATION:function(e,t,n,r){return"Layer trim end value ".concat(ep.default.white(e),"s is greater than ").concat(t,"s file duration -  file: ").concat(r,", method: ").concat(n)},INVALID_TRIM_VALUE_LESS_THAN_DURATION:function(e,t,n,r){return"Layer trim start value ".concat(ep.default.white(e),"s is less than ").concat(t,"s file duration - file: ").concat(r,", method: ").concat(n)}};var em=P(require("chalk"));var eg={dataRequired:"\\".concat(em.default.white("data"),"\\ must be provided"),dimensionsRequired:"\\".concat(em.default.white("dimensions"),"\\ must be provided unless a \\").concat(em.default.white("videoFile"),"\\ is provided"),durationRequired:"\\".concat(em.default.white("duration"),"\\ must be provided unless composition is instantiated from a \\").concat(em.default.white("videoFile"),"\\ or calculated automatically via a call to \\").concat(em.default.white("addSequence"),"\\"),errorEncoding:function(e){return"Error encoding video: ".concat(e)},filterRequired:"\\".concat(em.default.white("filter"),"\\ must be provided"),htmlPageOrUrlRequired:"Either \\".concat(em.default.white("page"),"\\ or \\").concat(em.default.white("url"),"\\ must be provided"),malformedEncodingResponse:"malformed \\".concat(em.default.white("encoding"),"\\ response"),optionsRequired:"\\".concat(em.default.white("options"),"\\ must be provided"),textRequired:"\\".concat(em.default.white("text"),"\\ field required"),trimEndRequired:function(e){return"layer \\".concat(em.default.white(e),"\\ must provide \\").concat(em.default.white(eh.SUB_FIELD(V.LayerKey.trim,V.TrimKey.end)),"\\ attribute in order to calculate position in sequence timeline automatically")},validationOptionsError:function(e){return"Error: ".concat(e)},videoEncodingFailed:function(e,t){return"Video encoding failed: ".concat(e," ").concat(t?"(".concat(t,")"):"")},htmlUrlInvalid:function(e){return"\\".concat(em.default.white(e),"\\ is invalid")},htmlUrlProtocolRequired:"\\".concat(em.default.white("url"),"\\ must include a protocol (e.g. http:// or https://)")};var eb=P(require("chalk")),eT={invalidFileSource:function(e){return"Invalid file source provided for \\".concat(eb.default.white(e),"\\")},invalidFileSourceUrl:function(e,t){return"Invalid file source url provided for \\".concat(eb.default.white(e),"\\ \\").concat(eb.default.white(t),"\\")}};var e_={all:function(e){return"Error getting videos: ".concat(e)},get:function(e){return"Error getting video: ".concat(e)},malformedResponse:"malformed `videos` response",new:function(e){return"Error creating new video: ".concat(e)}};var ew="4.3.0";var eK=function(e,t){return"".concat(e,"/v").concat(t)},eL=function(e){return ek(ex(e))},ex=function(e){return function(t){return t.url.startsWith("/")?(0,es.default)("".concat(e).concat(t.url),t):(0,es.default)(t.url,t)}},ek=function(e){return function(){var t=i(function(t){var n,r,i,o,a,u,s;return L(this,function(l){switch(l.label){case 0:n=t.data,r=t.headers,i=t.method,o=t.url;r["Content-Type"]==="application/json"&&(n=JSON.stringify(n));return[4,e({body:n,headers:r,method:i,url:o})];case 1:a=l.sent();if(!a.ok)throw new Error(el.requestUnsuccessful(a.url,a.statusText));return[4,a.json()];case 2:u=l.sent(),s=(0,eu.default)(u,{deep:!0});return[2,s.data&&!s.links&&!s.meta?s.data:s]}})});return function(e){return t.apply(this,arguments)}}()},eS=function(e){var t=e.isForm,n=t===void 0?!1:t,r=e.token;var i;var o=(i={},s(i,"User-Agent","editframe.js/".concat(ew)),s(i,"Authorization","Bearer ".concat(r)),i);return n?(o["Accept"]="application/json",o["X-Requested-With"]="XMLHttpRequest"):(o["Content-Type"]="application/json",o["Accept"]="application/json"),o["X-SDK-Version"]="".concat(ew),o};var eE=require("colortranslator");var eA=function(e){return e===V.Color.transparent?V.Color.transparent:eE.ColorTranslator.toHEXA(e)};var eD=P(require("lodash.clonedeep")),eF=P(require("lodash.merge")),eO=eD.default,eI=eF.default;var eP=function(){var e={};return eI(e,V.DefaultTimeline,V.DefaultTransitions,V.DefaultTrim),e},ez=function(){var e={audio:V.DefaultAudioOptions};return eI(e,eP()),e};var eR=function(){var e={};return eI(e,{audio:{volume:void 0}},{position:{angle:void 0,angleX:void 0,angleY:void 0,isRelative:void 0,origin:void 0,x:void 0,y:void 0}},{size:{format:void 0,height:void 0,scale:void 0,width:void 0}},{timeline:{start:void 0}},{transitions:[]},{trim:{end:void 0,start:void 0}}),e},ej=function(){var e={};return eI(e,eR()),e};var eU=function(){var e={};return eI(e,V.DefaultPosition,V.DefaultSize,V.DefaultTimeline,V.DefaultTransitions,V.DefaultTrim),e},eC=function(){var e={html:V.DefaultHtmlOptions};return eI(e,eU()),e};var eB=function(){var e={};return eI(e,V.DefaultPosition,V.DefaultSize,V.DefaultTimeline,V.DefaultTransitions,V.DefaultTrim),e},eq=function(){var e={};return eI(e,eB()),e};var eN=function(){var e={};return eI(e,V.DefaultPosition,V.DefaultSize,V.DefaultTimeline,V.DefaultTransitions,V.DefaultTrim),e},eH=function(){var e={lottie:{}};return eI(e,{lottie:V.DefaultLottieOptions},eN()),e};var eV=function(){var e={};return eI(e,V.DefaultTimeline),e},eW=function(){var e={};return eI(e,eV()),e};var eM=function(e){var t=e.height,n=e.width;return{size:{format:null,height:t,width:n}}};var eY=function(){var e={};return eI(e,{position:{isRelative:!0,x:V.LayerHorizontalAlignmentValue.center,y:.85}},V.DefaultTimeline,V.DefaultTransitions,V.DefaultTrim),e},eX=function(){var e={subtitles:V.DefaultSubtitlesOptions};return eI(e,eY()),e};var eJ=function(){var e={};return eI(e,V.DefaultPosition,V.DefaultSize,V.DefaultTimeline,V.DefaultTransitions,V.DefaultTrim),e},eG=function(){var e={text:V.DefaultTextOptions};return eI(e,eJ()),e};var eQ=function(){var e={};return eI(e,V.DefaultAudio,V.DefaultPosition,V.DefaultSize,V.DefaultTimeline,V.DefaultTransitions,V.DefaultTrim),e},eZ=function(){var e={};return eI(e,eQ()),e};var e$=function(e){var t={};return eI(t,V.DefaultPosition,eM(e),V.DefaultTimeline,V.DefaultTransitions,V.DefaultTrim),t},e0=function(e){var t={waveform:V.DefaultWaveformOptions};return eI(t,e$(e)),t};var e1=P(require("chalk")),e2=function(e){return console.error(e1.default.yellow(e))};var e3=require("cross-fetch"),e4=P(require("mime")),e5=P(require("fs")),e6=require("path"),e7=P(require("temp-dir"));var e8=require("path-to-regexp"),e9=P(require("query-string"));var te=function(e){return(0,e8.compile)(e)},tt=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"/",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e==="/"?e:te(e)(t,{pretty:!0})},tn=function(e){var t=new URL(e);return t.hash="",t.search="",t.toString()},tr=function(e,t){var n=e9.default.stringify(t);return"".concat(e).concat(n?"?".concat(n):"")},ti=function(e,t,n){var r;return tr(e,(r={},s(r,"page",t),s(r,"per_page",n),r))};var to=require("uuid"),ta=function(){return(0,to.v4)().slice(0,6)};var tu=function(e){(0,e5.existsSync)(e)||(0,e5.mkdirSync)(e,{recursive:!0})},ts=function(e){return e5.default.createReadStream(e)},tl=function(){var e="".concat(e7.default,"/").concat(ta());return tu(e),e},tc=function(){var e=i(function(e,t){var n,r,i,o;return L(this,function(a){switch(a.label){case 0:return[4,(0,e3.fetch)(e)];case 1:n=a.sent(),r=n.headers.get("Content-Type"),i="".concat(t,"/").concat(ta()).concat(td(tn(e),r)),o=(0,e5.createWriteStream)(i);return[4,new Promise(function(e,t){n.body.pipe(o),n.body.on("error",t),o.on("finish",e)})];case 2:return[2,(a.sent(),{temporaryFilePath:i})]}})});return function t(t,n){return e.apply(this,arguments)}}(),tf=function(e){return(0,e5.existsSync)(e)},td=function(e,t){var n=(0,e6.parse)(e).ext;return n||".".concat(e4.default.getExtension(t))},ty=function(e){tf(e)&&(0,e5.rmSync)(e,{recursive:!0})},tv=function(e,t){return(0,e5.writeFileSync)(e,t)};var tp=P(require("form-data"));var th=function(e){var t=new tp.default;return e.forEach(function(e){t.append(e[0],e[1])}),t},tm=function(e){return typeof e==="string"?"url":"file"};var tg=function(){process.env.NODE_ENV!=="test"&&process.exit(1)};var tb=P(require("validate-color"));var tT=function(e,t){return Array.isArray(t)?t.includes(typeof e==="undefined"?"undefined":T(e)):(typeof e==="undefined"?"undefined":T(e))===t},t_=function(e){try{return tw(e),!0}catch(e){return!1}},tw=function(e){try{new URL(e)}catch(t){throw new TypeError(eh.INVALID_URL(e))}},tK=function(e,t,n){n&&Object.keys(n).forEach(function(r){if(!Object.keys(t).includes(r))throw new Error(eh.INVALID_OPTIONS(e,Object.keys(t).join(", "),Object.keys(n).join(", ")))})},tL=function(e,t,n){var r=e.map(function(e){return e({callerName:t,layer:n})}).flat().filter(function(e){return e!==void 0});if(r.length)throw new TypeError("Validation Errors: ".concat(r.join("\n")))},tx=function(e,t){if(e==null)throw new Error(t)},tk=function(e,t){if(e.length===0)throw new Error(t)},tS=function(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(n&&(typeof n==="undefined"?"undefined":T(n))!==r){var o=eh.MUST_BE_TYPE(e,t,n,r);if(i)throw new TypeError(o);return o}};var tE=function(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(n&&!r.includes(n)){var o=eh.MUST_BE_TYPE(e,t,n,eh.OR(r.map(function(e){return e.toString()})));if(i)throw new TypeError(o);return o}},tA=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(tS(e,t,n,"string"),!(0,tb.default)(n)){var i=eh.INVALID_COLOR(e,t,n);if(r)throw new TypeError(i);return i}},tD=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(tS(e,t,n,"array"),!n[0].type){var i=eh.INVALID_FLOW_TYPE(e);if(r)throw new TypeError(i);return i}},tF=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(tS(e,t,n,"string"),!(n in V.VideoExtensions)){var i=eh.INVALID_VIDEO_EXTENSION(e,t,n);if(r)throw new TypeError(i);return i}},tO=function(e,t){try{return e(),t?t():void 0}catch(e){var n=e.name,r=e.stack;e2(r),tg();return}},tI=function(){var e=i(function(e,t,n){var r,i,o,a;return L(this,function(u){switch(u.label){case 0:u.trys.push([0,4,5,6]);e();if(!t)return[3,2];return[4,t()];case 1:r=u.sent();return[3,3];case 2:r=void 0;u.label=3;case 3:return[2,r];case 4:i=u.sent();o=i.name,a=i.stack;e2(a),tg();return[2];case 5:n&&n();return[7];case 6:return[2]}})});return function t(t,n,r){return e.apply(this,arguments)}}(),tP=function(e){return e!==void 0},tz=function(e){return e!==void 0},tR=function(e){return/^(https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})([/\w .-]*)*\/?$/i.test(e)};var tj=function(e){return"first"in e&&tT(e.first,"string")&&"last"in e&&tT(e.last,"string")},tU=function(e){return"active"in e&&tT(e.active,"boolean")&&"label"in e&&tT(e.label,"string")},tC=function(e){return"currentPage"in e&&tT(e.currentPage,"number")&&"from"in e&&tT(e.from,["number","object"])&&"lastPage"in e&&tT(e.lastPage,"number")&&"links"in e&&e.links.every(tU)&&"path"in e&&tT(e.path,"string")&&"perPage"in e&&tT(e.perPage,"number")&&"to"in e&&tT(e.to,["number","object"])&&"total"in e&&tT(e.total,"number")},tB=function(e,t){return"data"in e&&Array.isArray(e.data)&&(e.data.length>0?e.data.every(t):!0)&&"links"in e&&tj(e.links)&&"meta"in e&&tC(e.meta)};var tq=function(e){return"id"in e&&tT(e["id"],"string")&&"status"in e&&tT(e["status"],"string")&&"timestamp"in e&&tT(e["timestamp"],"number")},tN=function(e){return"id"in e&&tT(e.id,"string")&&"isReady"in e&&tT(e.isReady,"boolean")&&"isFailed"in e&&tT(e.isFailed,"boolean")},tH=function(e){return tB(e,tN)},tV=function(e){return"bitrate"in e&&tT(e.bitrate,"number")&&"codec"in e&&tT(e.codec,"string")&&"duration"in e&&tT(e.duration,"number")&&"samplerate"in e&&tT(e.samplerate,"number")&&"size"in e&&tT(e.size,"number")},tW=function(e){return"codec"in e&&tT(e.codec,"string")&&"height"in e&&tT(e.height,"number")&&"size"in e&&tT(e.size,"number")&&"width"in e&&tT(e.width,"number")},tM=function(e){return"bitrate"in e&&tT(e.bitrate,"number")&&"codec"in e&&tT(e.codec,"string")&&"duration"in e&&tT(e.duration,"number")&&"fps"in e&&tT(e.fps,"number")&&"height"in e&&tT(e.height,"number")&&"size"in e&&tT(e.size,"number")&&"width"in e&&tT(e.width,"number")};var tY=function(e){var t=e.backgroundColor,n=e.dimensions,r=e.duration,i=e.extension,o=e.fps,a=e.metadata;t&&tA("new",V.CompositionKey.backgroundColor,t,!0),o&&tS("new",V.CompositionKey.fps,r,"number",!0),i&&tF("new",V.CompositionKey.extension,i,!0),tS("new",eh.SUB_FIELD(V.CompositionKey.dimensions,V.DimensionsKey.height),n.height,"number",!0),tS("new",eh.SUB_FIELD(V.CompositionKey.dimensions,V.DimensionsKey.width),n.width,"number",!0),tS("new",V.CompositionKey.duration,r,"number",!0),tS("new",V.CompositionKey.metadata,a,"object",!0)};var tX;var tJ=function(e,t){if(e&&t.validate(e))return e;throw new Error(t.invalidDataError)},tG=(tX={},s(tX,"audio",function(e){return tJ(e,{invalidDataError:e_.malformedResponse,validate:tV})}),s(tX,"image",function(e){return tJ(e,{invalidDataError:e_.malformedResponse,validate:tW})}),s(tX,"video",function(e){return tJ(e,{invalidDataError:e_.malformedResponse,validate:tM})}),tX);var tQ=function(e){return"description"in e&&tT(e.description,"string")&&"id"in e&&tT(e.id,"string")&&"name"in e&&tT(e.name,"string")&&"webhook"in e&&tT(e.webhook,"string")},tZ=function(e){return tB(e,tQ)};var t$=P(require("cross-fetch")),t0=require("stream");var t1=function(e,t){if(tx(t,eT.invalidFileSource(e)),typeof t!="string"&&!f(t,t0.Readable))throw new Error(eT.invalidFileSource(e))},t2=function(){var e=i(function(e,t){var n,r;return L(this,function(o){switch(o.label){case 0:if(tx(t,eT.invalidFileSource(e)),typeof t=="string"&&!tR(t))return[2,!0];n=function(){var t=i(function(t){var n,r;return L(this,function(i){switch(i.label){case 0:return[4,(0,t$.default)(t,{method:"HEAD",redirect:"manual"})];case 1:n=i.sent();i.label=2;case 2:if(![301,302,303,307,308].includes(n.status))return[3,5];r=n.headers.get("location");if(!r)throw new Error(eT.invalidFileSourceUrl(t,e));return[4,(0,t$.default)(r,{method:"HEAD",redirect:"manual"})];case 3:n=i.sent();i.label=4;case 4:return[3,2];case 5:if(n.status===404||n.status===500)throw new Error(eT.invalidFileSourceUrl(t,e));return[2]}})});return function e(e){return t.apply(this,arguments)}}();if(!(typeof t=="string"))return[3,5];o.label=1;case 1:o.trys.push([1,3,,4]);return[4,n(t)];case 2:o.sent();return[3,4];case 3:r=o.sent();throw new Error(eT.invalidFileSourceUrl(t,e));case 4:return[3,6];case 5:if(!f(t,t0.Readable))throw new Error(eT.invalidFileSource(e));o.label=6;case 6:return[2,!0]}})});return function t(t,n){return e.apply(this,arguments)}}(),t3=function(e){var t=e.backgroundColor,n=e.dimensions;var r=[];tx(n,eg.dimensionsRequired),r.push(tS("new",eh.SUB_FIELD(V.CompositionKey.dimensions,V.DimensionsKey.height),n.height,"number")),r.push(tS("new",eh.SUB_FIELD(V.CompositionKey.dimensions,V.DimensionsKey.width),n.width,"number")),r.push(tS("new",V.CompositionKey.backgroundColor,t,"string"));var i=r.filter(function(e){return e!==void 0});if(i.length)throw new TypeError(i.join("\n"))};var t4=function(e){return"id"in e&&tT(e.id,"string")&&"isReady"in e&&tT(e.isReady,"boolean")&&"isFailed"in e&&tT(e.isFailed,"boolean")},t5=function(e){return tB(e,t4)};var t6=function(e){var t=e.deliverables,n=e.jobs;t&&tS("new","deliverables",t,"object",!0),n&&tD("new","jobs",n)};var t7=function(e){var t=e.callerName,n=e.layer,r=n.audio,i=r.volume;var o=[];return o.push(tS(t,eh.SUB_FIELD(V.LayerKey.audio,V.AudioKey.volume),i,"number")),o.filter(tP)},t8=function(e,t){return tL([t7],e,t)};var t9=function(e,t,n){var r=Object.values(V.LayerHorizontalAlignmentValue);if(n&&!r.includes(n))return eh.MUST_BE_TYPE(e,t,n,r.join(", "))},ne=function(e,t,n){var r=Object.values(V.LayerVerticalAlignmentValue);if(n&&!r.includes(n))return eh.MUST_BE_TYPE(e,t,n,r.join(", "))},nt=function(e,t,n){if(n)return typeof n==="string"?t9(e,t,n):tS(e,t,n,"number")},nn=function(e,t,n){if(n)return typeof n==="string"?ne(e,t,n):tS(e,t,n,"number")},nr=function(e){var t=e.callerName,n=e.layer,r=n.position,i=r.angle,o=r.angleX,a=r.angleY,u=r.isRelative,s=r.origin,l=r.x,c=r.y,f=r.z;var d=[];return d.push(tS(t,eh.SUB_FIELD(V.LayerKey.position,V.PositionKey.angle),i,"number")),d.push(tS(t,eh.SUB_FIELD(V.LayerKey.position,V.PositionKey.angleX),o,"number")),d.push(tS(t,eh.SUB_FIELD(V.LayerKey.position,V.PositionKey.angleY),a,"number")),d.push(tS(t,eh.SUB_FIELD(V.LayerKey.position,V.PositionKey.isRelative),u,"boolean")),d.push(tS(t,eh.SUB_FIELD(V.LayerKey.position,V.PositionKey.origin),s,"string")),d.push(tS(t,eh.SUB_FIELD(V.LayerKey.position,V.PositionKey.z),f,"number")),d.push(nt(t,eh.SUB_FIELD(V.LayerKey.position,V.PositionKey.x),l)),d.push(nn(t,eh.SUB_FIELD(V.LayerKey.position,V.PositionKey.y),c)),d.filter(tP)},ni=function(e,t){return tL([nr],e,t)};var no=function(e){var t=e.callerName,n=e.layer,r=n.size,i=r.format,o=r.height,a=r.scale,u=r.width;var s=[];return s.push(tE(t,eh.SUB_FIELD(V.LayerKey.size,V.SizeKey.format),i,Object.values(V.FormatValue))),s.push(tS(t,eh.SUB_FIELD(V.LayerKey.size,V.SizeKey.height),o,"number")),s.push(tS(t,eh.SUB_FIELD(V.LayerKey.size,V.SizeKey.scale),a,"number")),s.push(tS(t,eh.SUB_FIELD(V.LayerKey.size,V.SizeKey.width),u,"number")),s.filter(tP)},na=function(e,t){return tL([no],e,t)};var nu=function(e){var t=e.callerName,n=e.layer,r=n.timeline,i=r.start;var o=[];return o.push(tS(t,eh.SUB_FIELD(V.LayerKey.timeline,V.TimelineKey.start),i,"number")),o.filter(tP)},ns=function(e,t){return tL([nu],e,t)};var nl=function(e){return e&&Object.keys(e).length===1&&V.TransitionOptionKey.duration in e&&tT(e[V.TransitionOptionKey.duration],"number")},nc=function(e){return e&&[2,3].includes(Object.keys(e).length)&&V.TransitionOptionKey.time in e&&tT(e[V.TransitionOptionKey.value],"number")&&V.TransitionOptionKey.value in e&&tT(e[V.TransitionOptionKey.value],"number")},nf=function(e){var t=e.callerName,n=e.layer,r=n.transitions;var i=[];return r.forEach(function(e){var n=e.options,r=e.type;if(nc(n)?i.push(tS(t,eh.SUB_FIELD(V.LayerKey.transitions,V.TransitionKey.options),n===null||n===void 0?void 0:n.easing,"string"),tS(t,eh.SUB_FIELD(V.LayerKey.transitions,V.TransitionKey.options),n===null||n===void 0?void 0:n.time,"number"),tS(t,eh.SUB_FIELD(V.LayerKey.transitions,V.TransitionKey.options),n===null||n===void 0?void 0:n.value,"number")):nl(n)&&i.push(tS(t,eh.SUB_FIELD(V.LayerKey.transitions,V.TransitionKey.options),n===null||n===void 0?void 0:n.duration,"number")),!Object.values(V.TransitionType).includes(r)){var o=eh.MUST_BE_TYPE(t,V.TransitionKey.type,r,"".concat(Object.values(V.TransitionType).join(", ")));i.push(o)}}),i.filter(tP)},nd=function(e){var t="";if(e.forEach(function(e){"transitions"in e&&e.transitions.length&&e.transitions.filter(function(e){return e.type!==V.TransitionType.kenBurns}).forEach(function(n){![V.TransitionType.crossfadeIn,V.TransitionType.crossfadeOut,V.TransitionType.fadeIn,V.TransitionType.fadeOut].includes(n.type)&&e.transitions.length&&e.transitions.length<2&&(t=eh.TWO_TRANSITIONS_REQUIRED(n.type,e.type))})}),t)throw new Error(t)},ny=function(e,t){return tL([nf],e,t)};var nv=function(e){var t=e.callerName,n=e.layer,r=n.trim,i=e.shouldThrow,o=i===void 0?!1:i;var a=[];if(a.push(tS(t,eh.SUB_FIELD(V.LayerKey.trim,V.TrimKey.start),r===null||r===void 0?void 0:r.start,"number")),a.push(tS(t,eh.SUB_FIELD(V.LayerKey.trim,V.TrimKey.end),r===null||r===void 0?void 0:r.end,"number")),a.length>0&&o)throw new Error(a[0]);return a.filter(tP)},np=function(e,t){return tL([nv],e,t)};var nh=function(e,t){return tL([t7,nu,nv],e,t)};var nm=function(e){return e&&Object.keys(e).length===1&&V.EffectOptionKey.normalize in e&&tT(e[V.EffectOptionKey.normalize],"boolean")},ng=s({},V.EffectName.normalize,nm),nb=function(e){var t=e.callerName,n=e.layer,r=n.effect,i=r.name,o=r.options;var a=[],u=Object.values(V.EffectName).includes(i);if(!u){var s=eh.MUST_BE_TYPE(t,eh.SUB_FIELD(V.LayerKey.effect,V.EffectKey.name),i,"".concat(Object.values(V.EffectName).join(", ")));a.push(s)}if(u&&i in W&&!ng[i](o)){var l=eh.MUST_BE_TYPE(t,eh.SUB_FIELD(V.LayerKey.effect,V.EffectKey.options),o,JSON.stringify(W[i]));a.push(l)}return a.filter(tz)},nT=function(e,t){return tL([nb],e,t)};var n_;var nw=function(e){return e&&Object.keys(e).length===1&&V.FilterOptionKey.brightness in e&&tT(e[V.FilterOptionKey.brightness],"number")},nK=function(e){return e&&Object.keys(e).length===1&&V.FilterOptionKey.contrast in e&&tT(e[V.FilterOptionKey.contrast],"number")},nL=function(e){return e&&Object.keys(e).length===1&&V.FilterOptionKey.saturation in e&&tT(e[V.FilterOptionKey.saturation],"number")},nx=(n_={},s(n_,V.FilterName.brightness,nw),s(n_,V.FilterName.contrast,nK),s(n_,V.FilterName.saturation,nL),n_),nk=function(e){var t=e.callerName,n=e.layer,r=n.filter,i=r.name,o=r.options;var a=[],u=Object.values(V.FilterName).includes(i);if(!u){var s=eh.MUST_BE_TYPE(t,eh.SUB_FIELD(V.LayerKey.filter,V.FilterKey.name),i,"".concat(Object.values(V.FilterName).join(", ")));a.push(s)}if(u&&i in J&&!nx[i](o)){var l=eh.MUST_BE_TYPE(t,eh.SUB_FIELD(V.LayerKey.filter,V.FilterKey.options),o,JSON.stringify(J[i]));a.push(l)}return a.filter(tP)},nS=function(e,t){return tL([nk],e,t)};var nE=function(e,t){return tL([nr,no,nu,nv,t7],e,t)};var nA=P(require("http")),nD=P(require("https")),nF=function(e){return new Promise(function(t,n){(e.startsWith("https://")?nD.default:nA.default).get(e,function(e){e.statusCode===200?t(!0):t(!1)}).on("error",function(e){t(!1)})})};var nO=function(e,t){var n=[];return n.push(tS(e,eh.SUB_FIELD(V.LayerKey.html,eh.SUB_FIELD(V.HtmlKey.page,V.HtmlPageKey.body)),t===null||t===void 0?void 0:t.body,"string")),n.push(tS(e,eh.SUB_FIELD(V.LayerKey.html,eh.SUB_FIELD(V.HtmlKey.page,V.HtmlPageKey.styles)),t===null||t===void 0?void 0:t.styles,"string")),n},nI=function(e){var t=e.callerName,n=e.layer,r=n.html,i=r.page,o=r.url,a=r.withTailwind,u=r.withTransparentBackground;var s=[];return!i&&!o&&s.push(eg.htmlPageOrUrlRequired),o&&!o.startsWith("http://")&&!o.startsWith("https://")&&s.push(eg.htmlUrlProtocolRequired),nO(t,i).forEach(function(e){return s.push(e)}),s.push(tS(t,eh.SUB_FIELD(V.LayerKey.html,V.HtmlKey.withTailwind),a,"boolean")),s.push(tS(t,eh.SUB_FIELD(V.LayerKey.html,V.HtmlKey.withTransparentBackground),u,"boolean")),s.push(tS(t,eh.SUB_FIELD(V.LayerKey.html,V.HtmlKey.url),o,"string")),s.filter(tP)},nP=function(){var e=i(function(e){var t,n,r,i,o,a;return L(this,function(u){switch(u.label){case 0:t=e.layer,n=t.html,r=n.page,i=n.url;o=[];!r&&!i&&o.push(eg.htmlPageOrUrlRequired);a=i;if(!a)return[3,2];return[4,nF(i)];case 1:a=!u.sent();u.label=2;case 2:if(a)throw new Error(eg.htmlUrlInvalid(i));return[2,o.filter(tP)]}})});return function t(t){return e.apply(this,arguments)}}(),nz=function(e,t){return tL([nr,no,nu,nv,nI],e,t)};var nR=function(e,t){return tL([nr,no,nu,nv],e,t)};var nj=function(e){var t=e.callerName,n=e.layer,r=n.lottie;var i=[];return i.push(tS(t,V.LayerKey.lottie,r,"object")),i.filter(tP)},nU=function(e,t){tL([nj,nr,no,nu,nv],e,t)};var nC=function(e,t){return tL([nu],e,t)};var nB=function(e){var t=e.callerName,n=e.layer,r=n.subtitles,i=r.backgroundColor,o=r.color,a=r.fontSize;var u=[];return u.push(tA(t,eh.SUB_FIELD(V.LayerKey.subtitles,V.SubtitlesKey.backgroundColor),i,!1)),u.push(tA(t,eh.SUB_FIELD(V.LayerKey.subtitles,V.SubtitlesKey.color),o,!1)),u.push(tS(t,eh.SUB_FIELD(V.LayerKey.subtitles,V.SubtitlesKey.fontSize),a,"number")),u.filter(tP)},nq=function(e,t){return tL([nr,nB,nu,nv],e,t)};var nN=function(e,t){var n=Object.values(V.TextAlignValue);if(!n.includes(t))return eh.MUST_BE_TYPE(e,eh.SUB_FIELD(V.LayerKey.text,V.TextKey.textAlign),t,n.join(", "))},nH=function(e,t){var n=Object.values(V.TextHorizontalPositionValue),r=Object.values(V.TextVerticalPositionValue);if(t&&t.x&&!n.includes(t.x))return eh.MUST_BE_TYPE(e,eh.SUB_FIELD(V.LayerKey.text,eh.SUB_FIELD(V.TextKey.textPosition,"x")),t.x,n.join(", "));if(t&&t.y&&!r.includes(t.y))return eh.MUST_BE_TYPE(e,eh.SUB_FIELD(V.LayerKey.text,eh.SUB_FIELD(V.TextKey.textPosition,"y")),t.y,r.join(", "))},nV=function(e,t){var n=Object.values(V.FontStyleValue);if(t&&!n.includes(t))return eh.MUST_BE_TYPE(e,eh.SUB_FIELD(V.LayerKey.text,V.TextKey.fontStyle),t,n.join(", "))},nW=function(e,t){var n=Object.values(V.FontWeightValue);if(t&&!n.includes(t))return eh.MUST_BE_TYPE(e,eh.SUB_FIELD(V.LayerKey.text,V.TextKey.fontWeight),t,n.join(", "))},nM=function(e){var t=e.callerName,n=e.layer,r=n.text,i=r.backgroundColor,o=r.backgroundTransform,a=r.border,u=r.borderRadius,s=r.color,l=r.fontFamily,c=r.fontSize,f=r.fontStyle,d=r.fontWeight,y=r.lineHeight,v=r.padding,p=r.text,h=r.textAlign,m=r.textDecoration,g=r.textPosition,b=r.textTransform;var T=[];return T.push(tA(t,eh.SUB_FIELD(V.LayerKey.text,V.TextKey.backgroundColor),i,!1)),T.push(tS(t,eh.SUB_FIELD(V.LayerKey.text,V.TextKey.backgroundTransform),o,"string")),T.push(tS(t,eh.SUB_FIELD(V.LayerKey.text,V.TextKey.border),a,"string")),T.push(tS(t,eh.SUB_FIELD(V.LayerKey.text,V.TextKey.borderRadius),u,"number")),T.push(tA(t,eh.SUB_FIELD(V.LayerKey.text,V.TextKey.color),s,!1)),T.push(tS(t,eh.SUB_FIELD(V.LayerKey.text,V.TextKey.fontFamily),l,"string")),T.push(tS(t,eh.SUB_FIELD(V.LayerKey.text,V.TextKey.fontSize),c,"number")),T.push(nV(t,f)),T.push(nW(t,d)),T.push(tS(t,eh.SUB_FIELD(V.LayerKey.text,V.TextKey.lineHeight),y,"number")),T.push(tS(t,eh.SUB_FIELD(V.LayerKey.text,V.TextKey.padding),v,"number")),T.push(tS(t,eh.SUB_FIELD(V.LayerKey.text,V.TextKey.text),p,"string")),T.push(nN(t,h)),T.push(tS(t,eh.SUB_FIELD(V.LayerKey.text,V.TextKey.textDecoration),m,"string")),T.push(nH(t,g)),T.push(tS(t,eh.SUB_FIELD(V.LayerKey.text,V.TextKey.textTransform),b,"string")),T.filter(tP)},nY=function(e,t){return tL([nr,no,nM,nu,nv],e,t)};var nX=function(e,t){return tL([nr,no,nu,nv,t7],e,t)};var nJ=function(e){var t=e.callerName,n=e.layer,r=n.waveform,i=r.backgroundColor,o=r.color,a=r.style;var u=[];return u.push(tA(t,eh.SUB_FIELD(V.LayerKey.waveform,V.WaveformKey.backgroundColor),i,!1)),u.push(tA(t,eh.SUB_FIELD(V.LayerKey.waveform,V.WaveformKey.color),o,!1)),u.push(tE(t,eh.SUB_FIELD(V.LayerKey.waveform,V.WaveformKey.style),a,Object.values(V.WaveformStyleValue))),u.filter(tP)},nG=function(e,t){tL([nu,nJ],e,t)};var nQ=function(e){return C.default.includes(e.replace(/\./g,""))};var nZ=function(e){return q.default.includes(e.replace(/\./g,""))};var n$=P(require("ffprobe-static")),n0=require("child_process");var n1=function(e,t){return"".concat(tm(e)).concat(t)},n2=function(e,t,n,r){var i,o;var a=v({},e),u=(i={},s(i,V.LayerType.audio,eO(V.DefaultAudioOptions)),s(i,V.LayerType.filter,eO(G)),s(i,V.LayerType.effect,eO(M)),s(i,V.LayerType.group,void 0),s(i,V.LayerType.html,eO(V.DefaultHtmlOptions)),s(i,V.LayerType.image,void 0),s(i,V.LayerType.lottie,{}),s(i,V.LayerType.sequence,void 0),s(i,V.LayerType.subtitles,eO(V.DefaultSubtitlesOptions)),s(i,V.LayerType.text,eO(V.DefaultTextOptions)),s(i,V.LayerType.video,void 0),s(i,V.LayerType.waveform,eO(V.DefaultWaveformOptions)),i),l=(o={},s(o,V.LayerType.audio,eO(ez())),s(o,V.LayerType.effect,eO(Y)),s(o,V.LayerType.filter,eO(Q)),s(o,V.LayerType.group,eO(ej())),s(o,V.LayerType.html,eO(eC())),s(o,V.LayerType.image,eO(eq())),s(o,V.LayerType.lottie,eO(eH())),s(o,V.LayerType.sequence,eO(eW())),s(o,V.LayerType.subtitles,eO(eX())),s(o,V.LayerType.text,eO(eG())),s(o,V.LayerType.video,eO(eZ())),s(o,V.LayerType.waveform,eO(e0(a))),o),c=eO(l)[t];return n&&Object.keys(n).length!==0&&(c[t]=eI(u[t],n)),r&&(c=eI(c,r)),c},n3=function(){var e=i(function(e,t){var n,r,i;return L(this,function(o){switch(o.label){case 0:if(typeof e!="string"){n=e.path;if(!tf(n))throw new Error(eh.FILE_DOES_NOT_EXIST(n));return[2,{filepath:n,readStream:e}]}if(!t_(e))return[3,2];return[4,tc(e,t)];case 1:r=o.sent(),i=r.temporaryFilePath;return[2,{filepath:i,readStream:ts(i)}];case 2:if(!tf(e))throw new Error(eh.FILE_DOES_NOT_EXIST(e));return[2,{filepath:e,readStream:ts(e)}]}})});return function t(t,n){return e.apply(this,arguments)}}(),n4=function(){var e=i(function(e,t,n,r){var i,o,a,u,s,l,c,f;return L(this,function(d){switch(d.label){case 0:c=[];return[4,n9(n)];case 1:f=d.sent();if(((i=e.trim)===null||i===void 0?void 0:i.start)&&((o=e.trim)===null||o===void 0?void 0:o.start)>f&&c.push(eh.INVALID_TRIM_VALUE_LESS_THAN_DURATION((a=e.trim)===null||a===void 0?void 0:a.start,f,t,r)),((u=e.trim)===null||u===void 0?void 0:u.end)&&((s=e.trim)===null||s===void 0?void 0:s.end)>f&&c.push(eh.INVALID_TRIM_VALUE_GREATER_THAN_DURATION((l=e.trim)===null||l===void 0?void 0:l.end,f,t,r)),c.length>0)throw new Error(c[0]);return[2,c.length===0]}})});return function t(t,n,r,i){return e.apply(this,arguments)}}(),n5=function(e,t,n,r){var i=e,o=t.transitions.find(function(e){return e.type===V.TransitionType.crossfadeIn}),a=n?n.transitions.find(function(e){return e.type===V.TransitionType.crossfadeOut}):void 0,u=r?r.transitions.find(function(e){return e.type===V.TransitionType.crossfadeIn}):void 0,s=o===null||o===void 0?void 0:o.options,l=a===null||a===void 0?void 0:a.options,c=u===null||u===void 0?void 0:u.options;return n&&a?(t.transitions.find(function(e){var t=e.type;return t===V.TransitionType.fadeIn})===void 0&&t.addTransition({options:{duration:l===null||l===void 0?void 0:l.duration},type:V.TransitionType.fadeIn}),t.setStart(i-l.duration),i=i-l.duration):r&&u?(t.transitions.find(function(e){var t=e.type;return t===V.TransitionType.fadeOut})===void 0&&t.addTransition({options:{duration:c.duration},type:V.TransitionType.fadeOut}),t.setStart(i),i=i-c.duration):n&&o?(n.transitions.find(function(e){var t=e.type;return t===V.TransitionType.fadeOut})===void 0&&n.addTransition({options:{duration:s.duration},type:V.TransitionType.fadeOut}),t.setStart(i-(s===null||s===void 0?void 0:s.duration)),i=i-(s===null||s===void 0?void 0:s.duration)):t.setStart(i),i},n6=function(e,t){var n;t.audio&&Z.includes(e.type)&&e.setVolume(t.audio.volume),t.position&&$.includes(e.type)&&(t.position.angle&&e.setAngle(t.position.angle),t.position.angleX&&e.setAngleX(t.position.angleX),t.position.angleY&&e.setAngleY(t.position.angleY),t.position.origin&&e.setOrigin(t.position.origin),t.position.isRelative&&e.setIsRelative(t.position.isRelative),t.position.x&&e.setX(t.position.x),t.position.y&&e.setY(t.position.y),t.position.z&&e.setZ(t.position.z)),t.size&&ee.includes(e.type)&&(t.size.format&&e.setFormat(t.size.format),t.size.height&&e.setHeight(t.size.height),t.size.scale&&e.setScale(t.size.scale),t.size.width&&e.setWidth(t.size.width)),((n=t.timeline)===null||n===void 0?void 0:n.start)&&et.includes(e.type)&&e.setStart(t.timeline.start),t.transitions&&en.includes(e.type)&&t.transitions.forEach(function(t){e.addTransition(t)}),t.trim&&er.includes(e.type)&&e.setTrim(t.trim.start,t.trim.end)},n7=function(e){var t=e.end,n=e.layer,r=e.scale1,i=e.scale2,o=e.start,a=e.x1,u=e.x2,s=e.y1,l=e.y2;return n.addTransition({options:{time:o,value:r},type:V.TransitionType.scale}),n.addTransition({options:{time:t,value:i},type:V.TransitionType.scale}),n.addTransition({options:{time:o,value:a},type:V.TransitionType.x}),n.addTransition({options:{time:t,value:u},type:V.TransitionType.x}),n.addTransition({options:{time:o,value:s},type:V.TransitionType.y}),n.addTransition({options:{time:t,value:l},type:V.TransitionType.y}),n},n8=function(e,t){return e.position&&t.position?e.position.z-t.position.z:0},n9=function(e){return new Promise(function(t,n){var r=(0,n0.spawn)(n$.default.path,["-v","error","-show_entries","format=duration","-of","json",e]),i="";r.stdout.on("data",function(e){i+=e}),r.stderr.on("data",function(e){console.error("ffprobe error: ".concat(e))}),r.on("close",function(e){if(e===0)try{var r=JSON.parse(i),o=parseFloat(r.format.duration);t(o)}catch(e){n(e)}else n(new Error("ffprobe process exited with code ".concat(e)))})})};var re=P(require("find-process")),rt=require("child_process"),rn=P(require("path"));var rr=function(){var e=i(function(e){return L(this,function(t){switch(t.label){case 0:tf(ei)?(0,rt.execSync)("git pull",{cwd:rn.default.resolve(ei),stdio:[0,1,2]}):(tu(ei),(0,rt.execSync)("git clone https://github.com/editframe/editframe-preview .",{cwd:rn.default.resolve(ei),stdio:[0,1,2]})),tv(eo,e);return[4,(0,re.default)("port",ea)];case 1:t.sent().length||(0,rt.execSync)("cd ".concat(ei,"; yarn; yarn dev"),{cwd:rn.default.resolve(ei),stdio:[0,1,2]});return[2]}})});return function t(t){return e.apply(this,arguments)}}();var ri=function(){function e(t){o(this,e);this._options=v({},t),this._fetch=t.fetch}u(e,[{key:"get",value:function e(e){var t=e.url;var n=this;return i(function(){return L(this,function(e){switch(e.label){case 0:return[4,n._fetch({headers:eS(n._options),url:t})];case 1:return[2,e.sent()]}})})()}},{key:"post",value:function e(e){var t=e.data,n=e.isForm,r=n===void 0?!1:n,o=e.url;var a=this;return i(function(){return L(this,function(e){switch(e.label){case 0:return[4,a._fetch({data:t,headers:eS(h(v({},a._options),{isForm:r})),method:"post",url:o})];case 1:return[2,e.sent()]}})})()}},{key:"put",value:function e(e){var t=e.data,n=e.isForm,r=n===void 0?!1:n,o=e.url;var a=this;return i(function(){return L(this,function(e){switch(e.label){case 0:return[4,a._fetch({data:t,headers:eS(h(v({},a._options),{isForm:r})),method:"put",url:o})];case 1:return[2,e.sent()]}})})()}}]);return e}();var ro=function(){function e(t){o(this,e);this._api=t}u(e,[{key:"all",value:function e(e,t){var n=this;return i(function(){var r,i;return L(this,function(o){switch(o.label){case 0:o.trys.push([0,2,,3]);return[4,n._api.get({url:ti(H.applications.all,e,t)})];case 1:r=o.sent();return[2,tJ(r,{invalidDataError:ec.malformedResponse,validate:tZ}).data];case 2:i=o.sent();f(i,Error)&&console.error(ec.get(i.message));return[3,3];case 3:return[2,[]]}})})()}},{key:"get",value:function e(e){var t=this;return i(function(){var n,r;return L(this,function(i){switch(i.label){case 0:i.trys.push([0,2,,3]);return[4,t._api.get({url:tt(H.applications.get,{id:e})})];case 1:n=i.sent();return[2,tJ(n,{invalidDataError:ec.malformedResponse,validate:tQ})];case 2:r=i.sent();f(r,Error)&&console.error(ec.get(r.message));return[3,3];case 3:return[2]}})})()}}]);return e}();var ra=P(require("ora")),ru=P(require("pusher-js"));global.Pusher=ru.default;var rs=function(){function e(t){var n=t.api,r=t.deliverables,i=t.develop,a=t.jobs;o(this,e);this.jobs=[];this._api=n,this.jobs=a||[],this.deliverables=r,this._develop=i,tO(function(){return null})}u(e,[{key:"addJob",value:function e(e){return this.jobs.push(e),this.jobs}},{key:"run",value:function e(){var e=this;return i(function(){var t;return L(this,function(n){return[2,tI(function(){tx(e.jobs,ev.jobsRequired),tk(e.jobs,ev.jobsNotEmpty)},i(function(){var n;return L(this,function(r){switch(r.label){case 0:e._develop&&(t=(0,ra.default)("Uploading flow video configuration").start());return[4,e._api.post({data:JSON.stringify({jobs:e.jobs,deliverables:e.deliverables}),isForm:!1,url:H.flows.run})];case 1:n=r.sent();return[2,(e._develop&&t.succeed("Flow video configuration uploaded"),tJ(n,{invalidDataError:ev.malformedEncodingResponse,validate:tq}))]}})}))]})})()}}]);return e}();var rl=function(){function e(t){var n=t.api,r=t.develop,i=r===void 0?!1:r,a=t.host;o(this,e);this._api=n,this._host=a,this._develop=i}u(e,[{key:"all",value:function e(e,t){var n=this;return i(function(){var r,i;return L(this,function(o){switch(o.label){case 0:o.trys.push([0,2,,3]);return[4,n._api.get({url:ti(H.flows.all,e,t)})];case 1:r=o.sent();return[2,tJ(r,{invalidDataError:ev.malformedResponse,validate:t5}).data];case 2:i=o.sent();f(i,Error)&&console.error(ev.all(i.message));return[3,3];case 3:return[2,[]]}})})()}},{key:"get",value:function e(e){var t=e.id;var n=this;return i(function(){var e,r;return L(this,function(i){switch(i.label){case 0:i.trys.push([0,2,,3]);return[4,n._api.get({url:tt(H.flows.get,{id:t})})];case 1:e=i.sent();return[2,tJ(e,{invalidDataError:ev.malformedResponse,validate:t4})];case 2:r=i.sent();f(r,Error)&&console.error(ev.get(r.message));return[3,3];case 3:return[2]}})})()}},{key:"new",value:function e(e){var t=this;return i(function(){return L(this,function(n){return[2,tI(function(){t6(e)},i(function(){var n,r;return L(this,function(i){n=e.deliverables,r=e.jobs;return[2,new rs({api:t._api,host:t._host,jobs:r,deliverables:n,develop:t._develop})]})}))]})})()}}]);return e}();var rc=P(require("form-data"));var rf=P(require("form-data")),rd=P(require("laravel-echo")),ry=P(require("open")),rv=P(require("ora")),rp=P(require("pretty-ms")),rh=P(require("pusher-js")),rm=require("tailwind-merge");var rg=require("ts-mixer");var rb=function(){function e(t){var n=t.composition,r=t.id;o(this,e);this._composition=n,this._id=r}u(e,[{key:"id",get:function e(){return this._id}},{key:"getAttribute",value:function e(e){var t=e.childKey,n=e.layerKey;return this._composition.getLayerAttribute({childKey:t,id:this.id,layerKey:n})}},{key:"setAttribute",value:function e(e){var t=e.childKey,n=e.layerKey,r=e.value;return this._composition.setLayerAttribute({childKey:t,id:this._id,layerKey:n,value:r}),this}}]);return e}();var rT=function(e){c(n,e);var t=K(n);function n(e){var r=e.composition,i=e.id;o(this,n);return t.call(this,{composition:r,id:i})}u(n,[{key:"volume",get:function e(){return this._getAudioAttribute(V.AudioKey.volume)}},{key:"setVolume",value:function e(e){var t=this;return tO(function(){t8("setVolume",{audio:{volume:e}})},function(){var n=e;return e>1?n=1:e<0&&(n=0),t._setAudioAttribute(V.AudioKey.volume,n)})}},{key:"setMuted",value:function e(){return this._setAudioAttribute(V.AudioKey.volume,0)}},{key:"_getAudioAttribute",value:function e(e){return this.getAttribute({childKey:e,layerKey:V.LayerKey.audio})}},{key:"_setAudioAttribute",value:function e(e,t){return this.setAttribute({childKey:e,layerKey:V.LayerKey.audio,value:t})}}]);return n}(rb);var r_=function(e){c(n,e);var t=K(n);function n(e){var r=e.composition,i=e.id;o(this,n);return t.call(this,{composition:r,id:i})}u(n,[{key:"timeline",get:function e(){return this._composition.getLayerAttribute({id:this.id,layerKey:V.LayerKey.timeline})}},{key:"start",get:function e(){return this._getTimelineAttribute(V.TimelineKey.start)}},{key:"setStart",value:function e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;var t=this;return tO(function(){return ns("setStart",{timeline:{start:e}})},function(){return t._setTimelineAttribute(V.TimelineKey.start,e)})}},{key:"_getTimelineAttribute",value:function e(e){return this.getAttribute({childKey:e,layerKey:V.LayerKey.timeline})}},{key:"_setTimelineAttribute",value:function e(e,t){return this.setAttribute({childKey:e,layerKey:V.LayerKey.timeline,value:t})}}]);return n}(rb);var rw=function(e){c(n,e);var t=K(n);function n(e){var r=e.composition,i=e.id;o(this,n);return t.call(this,{composition:r,id:i})}u(n,[{key:"transitions",get:function e(){return this.getAttribute({layerKey:V.LayerKey.transitions})}},{key:"addTransition",value:function e(e){var t=e.options,n=e.type;var r=this;return tO(function(){return ny("addTransition",{transitions:[{options:t,type:n}]})},function(){return r.setAttribute({layerKey:V.LayerKey.transitions,value:eO(b(r.transitions||[]).concat([{options:t,type:n}]))})})}},{key:"setTransitions",value:function e(e){var t=this;return tO(function(){return ny("setTransitions",{transitions:e})},function(){return t.setAttribute({layerKey:V.LayerKey.transitions,value:e})})}}]);return n}(rb);var rK=function(e){c(n,e);var t=K(n);function n(e){var r=e.composition,i=e.id;o(this,n);return t.call(this,{composition:r,id:i})}u(n,[{key:"trim",get:function e(){return this._composition.getLayerAttribute({id:this.id,layerKey:V.LayerKey.trim})}},{key:"setTrim",value:function e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._composition.duration;var n=this;return tO(function(){return np("setTrim",{trim:{end:t,start:e}})},function(){return n._setTrimAttribute(V.TrimKey.start,e<0?0:e),t&&n._setTrimAttribute(V.TrimKey.end,t),n})}},{key:"_setTrimAttribute",value:function e(e,t){return this.setAttribute({childKey:e,layerKey:V.LayerKey.trim,value:t})}}]);return n}(rb);var rL=function(e){c(n,e);var t=K(n);function n(e){var r=e.composition,i=e.id;o(this,n);return t.call(this,{composition:r,id:i})}u(n,[{key:"type",get:function e(){return V.LayerType.audio}}]);return n}((0,rg.Mixin)(rT,r_,rw,rK));var rx=function(e){c(n,e);var t=K(n);function n(e){var r=e.composition,i=e.id;o(this,n);return t.call(this,{composition:r,id:i})}u(n,[{key:"type",get:function e(){return V.LayerType.effect}},{key:"name",get:function e(){return this._getEffectAttribute(V.EffectKey.name)}},{key:"options",get:function e(){return this._getEffectAttribute(V.EffectKey.options)}},{key:"setEffect",value:function e(e){var t=e.name,n=e.options;var r=this;return tO(function(){return nT("setEffect",{effect:{name:t,options:n}})},function(){return r.setAttribute({layerKey:V.LayerKey.effect,value:{name:t,options:n}})})}},{key:"_getEffectAttribute",value:function e(e){return this.getAttribute({childKey:e,layerKey:V.LayerKey.effect})}}]);return n}(rb);var rk=function(e){c(n,e);var t=K(n);function n(e){var r=e.composition,i=e.id;o(this,n);return t.call(this,{composition:r,id:i})}u(n,[{key:"type",get:function e(){return V.LayerType.filter}},{key:"name",get:function e(){return this._getFilterAttribute(V.FilterKey.name)}},{key:"options",get:function e(){return this._getFilterAttribute(V.FilterKey.options)}},{key:"setFilter",value:function e(e){var t=e.name,n=e.options;var r=this;return tO(function(){return nS("setFilter",{filter:{name:t,options:n}})},function(){return r.setAttribute({layerKey:V.LayerKey.filter,value:{name:t,options:n}})})}},{key:"_getFilterAttribute",value:function e(e){return this.getAttribute({childKey:e,layerKey:V.LayerKey.filter})}}]);return n}(rb);var rS=require("ts-mixer");var rE=function(e){c(n,e);var t=K(n);function n(e){var r=e.composition,i=e.id;o(this,n);return t.call(this,{composition:r,id:i})}u(n,[{key:"angle",get:function e(){return this._getPositionAttribute(V.PositionKey.angle)}},{key:"angleX",get:function e(){return this._getPositionAttribute(V.PositionKey.angleX)}},{key:"angleY",get:function e(){return this._getPositionAttribute(V.PositionKey.angleY)}},{key:"isRelative",get:function e(){return this._getPositionAttribute(V.PositionKey.isRelative)}},{key:"origin",get:function e(){return this._getPositionAttribute(V.PositionKey.origin)}},{key:"x",get:function e(){return this._getPositionAttribute(V.PositionKey.x)}},{key:"y",get:function e(){return this._getPositionAttribute(V.PositionKey.y)}},{key:"z",get:function e(){return this._getPositionAttribute(V.PositionKey.z)}},{key:"setAngle",value:function e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;var t=this;return tO(function(){return ni("setAngle",{position:{angle:e}})},function(){return t._setPositionAttribute(V.PositionKey.angle,e)})}},{key:"setAngleX",value:function e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;var t=this;return tO(function(){return ni("setAngleX",{position:{angleX:e}})},function(){return t._setPositionAttribute(V.PositionKey.angleX,e)})}},{key:"setAngleY",value:function e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;var t=this;return tO(function(){return ni("setAngleY",{position:{angleY:e}})},function(){return t._setPositionAttribute(V.PositionKey.angleY,e)})}},{key:"setIsRelative",value:function e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;var t=this;return tO(function(){return ni("setIsRelative",{position:{isRelative:e}})},function(){return t._setPositionAttribute(V.PositionKey.isRelative,e)})}},{key:"setX",value:function e(e){var t=this;return tO(function(){return ni("setX",{position:{x:e}})},function(){return t._setPositionAttribute(V.PositionKey.x,e)})}},{key:"setOrigin",value:function e(e){var t=this;return tO(function(){return ni("setOrigin",{position:{origin:e}})},function(){return t._setPositionAttribute(V.PositionKey.origin,e)})}},{key:"setY",value:function e(e){var t=this;return tO(function(){return ni("setY",{position:{y:e}})},function(){return t._setPositionAttribute(V.PositionKey.y,e)})}},{key:"setZ",value:function e(e){var t=this;return tO(function(){return ni("setZ",{position:{z:e}})},function(){return t._setPositionAttribute(V.PositionKey.z,e)})}},{key:"_getPositionAttribute",value:function e(e){return this.getAttribute({childKey:e,layerKey:V.LayerKey.position})}},{key:"_setPositionAttribute",value:function e(e,t){return this.setAttribute({childKey:e,layerKey:V.LayerKey.position,value:t})}}]);return n}(rb);var rA=function(e){c(n,e);var t=K(n);function n(e){var r=e.composition,i=e.id;o(this,n);return t.call(this,{composition:r,id:i})}u(n,[{key:"dimensions",get:function e(){return this._composition.getLayerAttribute({id:this.id,layerKey:V.LayerKey.size})}},{key:"format",get:function e(){return this._getSizeAttribute(V.SizeKey.format)}},{key:"height",get:function e(){return this._getSizeAttribute(V.SizeKey.height)}},{key:"scale",get:function e(){return this._getSizeAttribute(V.SizeKey.scale)}},{key:"width",get:function e(){return this._getSizeAttribute(V.SizeKey.width)}},{key:"setDimensions",value:function e(e){var t=e.height,n=e.width;var r=this;return tO(function(){return na("setDimensions",{size:{height:t,width:n}})},function(){return r._setSizeAttribute(V.SizeKey.height,t),r._setSizeAttribute(V.SizeKey.width,n)})}},{key:"setFormat",value:function e(e){var t=this;return tO(function(){return na("setFormat",{size:{format:e}})},function(){return t._setSizeAttribute(V.SizeKey.format,e)})}},{key:"setHeight",value:function e(e){var t=this;return tO(function(){return na("setHeight",{size:{height:e}})},function(){return t._setSizeAttribute(V.SizeKey.height,e)})}},{key:"setScale",value:function e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;var t=this;return tO(function(){return na("setScale",{size:{scale:e}})},function(){return t._setSizeAttribute(V.SizeKey.scale,e)})}},{key:"setWidth",value:function e(e){var t=this;return tO(function(){return na("setWidth",{size:{width:e}})},function(){return t._setSizeAttribute(V.SizeKey.width,e)})}},{key:"_getSizeAttribute",value:function e(e){return this.getAttribute({childKey:e,layerKey:V.LayerKey.size})}},{key:"_setSizeAttribute",value:function e(e,t){return this.setAttribute({childKey:e,layerKey:V.LayerKey.size,value:t})}}]);return n}(rb);var rD=function(e){c(n,e);var t=K(n);function n(e){var r=e.composition,i=e.id,a=e.layers;o(this,n);var u;u=t.call(this,{composition:r,id:i});u.layers=a;return u}u(n,[{key:"type",get:function e(){return V.LayerType.group}},{key:"setStart",value:function e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;var t=this;return tO(function(){return tS("setStart",V.TimelineKey.start,e,"number",!0)},function(){return t.layers.forEach(function(t){t.setStart(e)}),t.setAttribute({childKey:V.TimelineKey.start,layerKey:V.LayerKey.timeline,value:e})})}}]);return n}((0,rS.Mixin)(rE,rA,r_,rw,rK));var rF=require("ts-mixer");var rO=function(e){c(n,e);var t=K(n);function n(e){var r=e.composition,i=e.id;o(this,n);return t.call(this,{composition:r,id:i})}u(n,[{key:"type",get:function e(){return V.LayerType.html}},{key:"page",get:function e(){return this._getHtmlAttribute(V.HtmlKey.page)}},{key:"url",get:function e(){return this._getHtmlAttribute(V.HtmlKey.url)}},{key:"withTailwind",get:function e(){return this._getHtmlAttribute(V.HtmlKey.withTailwind)}},{key:"withTransparentBackground",get:function e(){return this._getHtmlAttribute(V.HtmlKey.withTransparentBackground)}},{key:"setPage",value:function e(e){var t=this;return tI(function(){return nO("setPage",e)},i(function(){return L(this,function(n){return[2,(t.setHtmlAttribute(V.HtmlKey.url,void 0),t.setHtmlAttribute(V.HtmlKey.page,e))]})}))}},{key:"setUrl",value:function e(e){var t=this;return tO(function(){return tS("setUrl",V.HtmlKey.url,e,"string",!0)},function(){return t.setHtmlAttribute(V.HtmlKey.page,void 0),t.setHtmlAttribute(V.HtmlKey.url,e)})}},{key:"setWithTailwind",value:function e(e){var t=this;return tO(function(){return tS("setWithTailwind",V.HtmlKey.withTailwind,e,"boolean",!0)},function(){return t.setHtmlAttribute(V.HtmlKey.withTailwind,e)})}},{key:"setWithTransparentBackground",value:function e(e){var t=this;return tO(function(){return tS("setWithTransparentBackground",V.HtmlKey.withTransparentBackground,e,"boolean",!0)},function(){return t.setHtmlAttribute(V.HtmlKey.withTransparentBackground,e)})}},{key:"_getHtmlAttribute",value:function e(e){return this.getAttribute({childKey:e,layerKey:V.LayerKey.html})}},{key:"setHtmlAttribute",value:function e(e,t){return this.setAttribute({childKey:e,layerKey:V.LayerKey.html,value:t})}}]);return n}((0,rF.Mixin)(rE,rA,r_,rw,rK));var rI=require("ts-mixer");var rP=function(e){c(n,e);var t=K(n);function n(e){var r=e.composition,i=e.id;o(this,n);return t.call(this,{composition:r,id:i})}u(n,[{key:"type",get:function e(){return V.LayerType.image}}]);return n}((0,rI.Mixin)(rE,rA,r_,rw,rK));var rz=require("ts-mixer");var rR=function(e){c(n,e);var t=K(n);function n(e){var r=e.composition,i=e.id;o(this,n);return t.call(this,{composition:r,id:i})}u(n,[{key:"type",get:function e(){return V.LayerType.lottie}},{key:"animationData",get:function e(){return this.getAttribute({layerKey:V.LayerKey.lottie})}},{key:"setAnimationData",value:function e(e){var t=this;return tO(function(){tx(e,eh.REQUIRED_FIELD(V.LayerKey.lottie)),tS("setAnimationData",V.LayerKey.lottie,e,"object")},function(){return t.setAttribute({layerKey:V.LayerKey.lottie,value:e})})}}]);return n}((0,rz.Mixin)(rE,rA,r_,rw,rK));var rj=require("ts-mixer");var rU=function(e){c(n,e);var t=K(n);function n(e){var r=e.composition,i=e.id,a=e.layers;o(this,n);var u;u=t.call(this,{composition:r,id:i});u.layers=a;return u}u(n,[{key:"type",get:function e(){return V.LayerType.sequence}},{key:"setStart",value:function e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;var t=this;return tO(function(){return tS("setStart",V.TimelineKey.start,e,"number",!0)},function(){return t.layers.forEach(function(n){n.setStart(n.start+(e-t.start))}),t.setAttribute({childKey:V.TimelineKey.start,layerKey:V.LayerKey.timeline,value:e})})}}]);return n}((0,rj.Mixin)(r_));var rC=require("ts-mixer");var rB=function(e){c(n,e);var t=K(n);function n(e){var r=e.composition,i=e.id;o(this,n);return t.call(this,{composition:r,id:i})}u(n,[{key:"type",get:function e(){return V.LayerType.subtitles}},{key:"backgroundColor",get:function e(){return this._getSubtitlesAttribute(V.SubtitlesKey.backgroundColor)}},{key:"color",get:function e(){return this._getSubtitlesAttribute(V.SubtitlesKey.color)}},{key:"fontSize",get:function e(){return this._getSubtitlesAttribute(V.SubtitlesKey.fontSize)}},{key:"setBackgroundColor",value:function e(e){var t=this;return tO(function(){return tA("setBackgroundColor",V.SubtitlesKey.backgroundColor,e,!0)},function(){return t._setSubtitlesAttribute(V.SubtitlesKey.backgroundColor,eA(e))})}},{key:"setColor",value:function e(e){var t=this;return tO(function(){return tA("setColor",V.SubtitlesKey.color,e,!0)},function(){return t._setSubtitlesAttribute(V.SubtitlesKey.color,eA(e))})}},{key:"setFontSize",value:function e(e){var t=this;return tO(function(){return tS("setFontSize",V.SubtitlesKey.fontSize,e,"number",!0)},function(){return t._setSubtitlesAttribute(V.SubtitlesKey.fontSize,e)})}},{key:"_getSubtitlesAttribute",value:function e(e){return this.getAttribute({childKey:e,layerKey:V.LayerKey.subtitles})}},{key:"_setSubtitlesAttribute",value:function e(e,t){return this.setAttribute({childKey:e,layerKey:V.LayerKey.subtitles,value:t})}}]);return n}((0,rC.Mixin)(rE,r_,rw,rK));var rq=require("ts-mixer");var rN=function(e){c(n,e);var t=K(n);function n(e){var r=e.composition,i=e.id;o(this,n);return t.call(this,{composition:r,id:i})}u(n,[{key:"type",get:function e(){return V.LayerType.text}},{key:"backgroundColor",get:function e(){return this._getTextAttribute(V.TextKey.backgroundColor)}},{key:"backgroundTransform",get:function e(){return this._getTextAttribute(V.TextKey.backgroundTransform)}},{key:"border",get:function e(){return this._getTextAttribute(V.TextKey.border)}},{key:"borderRadius",get:function e(){return this._getTextAttribute(V.TextKey.borderRadius)}},{key:"color",get:function e(){return this._getTextAttribute(V.TextKey.color)}},{key:"fontFamily",get:function e(){return this._getTextAttribute(V.TextKey.fontFamily)}},{key:"fontSize",get:function e(){return this._getTextAttribute(V.TextKey.fontSize)}},{key:"fontStyle",get:function e(){return this._getTextAttribute(V.TextKey.fontStyle)}},{key:"fontWeight",get:function e(){return this._getTextAttribute(V.TextKey.fontWeight)}},{key:"lineHeight",get:function e(){return this._getTextAttribute(V.TextKey.lineHeight)}},{key:"padding",get:function e(){return this._getTextAttribute(V.TextKey.padding)}},{key:"text",get:function e(){return this._getTextAttribute(V.TextKey.text)}},{key:"textAlign",get:function e(){return this._getTextAttribute(V.TextKey.textAlign)}},{key:"textDecoration",get:function e(){return this._getTextAttribute(V.TextKey.textDecoration)}},{key:"textPosition",get:function e(){return this._getTextAttribute(V.TextKey.textPosition)}},{key:"textTransform",get:function e(){return this._getTextAttribute(V.TextKey.textTransform)}},{key:"tailwind",get:function e(){return this._getTextAttribute(V.TextKey.tailwind)}},{key:"setBackgroundColor",value:function e(e){var t=this;return tO(function(){return tA("setBackgroundColor",V.TextKey.backgroundColor,e,!0)},function(){return t._setTextAttribute(V.TextKey.backgroundColor,eA(e))})}},{key:"setBackgroundTransform",value:function e(e){var t=this;return tO(function(){return tS("setBackgroundTransform",V.TextKey.backgroundTransform,e,"string",!0)},function(){return t._setTextAttribute(V.TextKey.backgroundTransform,e)})}},{key:"setBorder",value:function e(e){var t=this;return tO(function(){return tS("setBorder",V.TextKey.border,e,"string",!0)},function(){return t._setTextAttribute(V.TextKey.border,e)})}},{key:"setBorderRadius",value:function e(e){var t=this;return tO(function(){return tS("setBorderRadius",V.TextKey.borderRadius,e,"number",!0)},function(){return t._setTextAttribute(V.TextKey.borderRadius,e)})}},{key:"setColor",value:function e(e){var t=this;return tO(function(){return tA("setColor",V.TextKey.color,e,!0)},function(){return t._setTextAttribute(V.TextKey.color,eA(e))})}},{key:"setFontFamily",value:function e(e){var t=this;return tO(function(){return tS("setFontFamily",V.TextKey.fontFamily,e,"string",!0)},function(){return t._setTextAttribute(V.TextKey.fontFamily,e)})}},{key:"setFontSize",value:function e(e){var t=this;return tO(function(){return tS("setFontSize",V.TextKey.fontSize,e,"number",!0)},function(){return t._setTextAttribute(V.TextKey.fontSize,e)})}},{key:"setFontStyle",value:function e(e){var t=this;return tO(function(){return nV("setFontStyle",e)},function(){return t._setTextAttribute(V.TextKey.fontStyle,e)})}},{key:"setFontWeight",value:function e(e){var t=this;return tO(function(){return nW("setFontWeight",e)},function(){return t._setTextAttribute(V.TextKey.fontWeight,e)})}},{key:"setLineHeight",value:function e(e){var t=this;return tO(function(){return tS("setLineHeight",V.TextKey.lineHeight,e,"number",!0)},function(){return t._setTextAttribute(V.TextKey.lineHeight,e)})}},{key:"setPadding",value:function e(e){var t=this;return tO(function(){return tS("setPadding",V.TextKey.padding,e,"number",!0)},function(){return t._setTextAttribute(V.TextKey.padding,e)})}},{key:"setText",value:function e(e){var t=this;return tO(function(){tx(e,eg.textRequired),tS("setText",V.TextKey.text,e,"string",!0)},function(){return t._setTextAttribute(V.TextKey.text,e)})}},{key:"setTextAlign",value:function e(e){var t=this;return tO(function(){return nN("setTextAlign",e)},function(){return t._setTextAttribute(V.TextKey.textAlign,e)})}},{key:"setTextDecoration",value:function e(e){var t=this;return tO(function(){return tS("setTextDecoration",V.TextKey.textDecoration,e,"string",!0)},function(){return t._setTextAttribute(V.TextKey.textDecoration,e)})}},{key:"setTextPosition",value:function e(e){var t=this;return tO(function(){return nH("setTextPosition",e)},function(){return t._setTextAttribute(V.TextKey.textPosition,e)})}},{key:"setTextTransform",value:function e(e){var t=this;return tO(function(){return tS("setTextTransform",V.TextKey.textTransform,e,"string",!0)},function(){return t._setTextAttribute(V.TextKey.textTransform,e)})}},{key:"_getTextAttribute",value:function e(e){return this.getAttribute({childKey:e,layerKey:V.LayerKey.text})}},{key:"_setTextAttribute",value:function e(e,t){return this.setAttribute({childKey:e,layerKey:V.LayerKey.text,value:t})}}]);return n}((0,rq.Mixin)(rE,rA,r_,rw,rK));var rH=require("ts-mixer");var rV=function(e){c(n,e);var t=K(n);function n(e){var r=e.composition,i=e.id;o(this,n);return t.call(this,{composition:r,id:i})}u(n,[{key:"type",get:function e(){return V.LayerType.video}}]);return n}((0,rH.Mixin)(rT,rE,rA,r_,rw,rK));var rW=require("ts-mixer");var rM=function(e){c(n,e);var t=K(n);function n(e){var r=e.composition,i=e.id;o(this,n);return t.call(this,{composition:r,id:i})}u(n,[{key:"type",get:function e(){return V.LayerType.waveform}},{key:"backgroundColor",get:function e(){return this._getWaveformAttribute(V.WaveformKey.backgroundColor)}},{key:"color",get:function e(){return this._getWaveformAttribute(V.WaveformKey.color)}},{key:"style",get:function e(){return this._getWaveformAttribute(V.WaveformKey.style)}},{key:"setBackgroundColor",value:function e(e){var t=this;return tO(function(){tA("setBackgroundColor",V.WaveformKey.backgroundColor,e,!0)},function(){return t._setWaveformAttribute(V.WaveformKey.backgroundColor,eA(e))})}},{key:"setColor",value:function e(e){var t=this;return tO(function(){tA("setColor",V.WaveformKey.color,e,!0)},function(){return t._setWaveformAttribute(V.WaveformKey.color,eA(e))})}},{key:"setStyle",value:function e(e){var t=this;return tO(function(){tS("setStyle",V.WaveformKey.style,e,"string",!0)},function(){return t._setWaveformAttribute(V.WaveformKey.style,e)})}},{key:"_getWaveformAttribute",value:function e(e){return this.getAttribute({childKey:e,layerKey:V.LayerKey.waveform})}},{key:"_setWaveformAttribute",value:function e(e,t){return this.setAttribute({childKey:e,layerKey:V.LayerKey.waveform,value:t})}}]);return n}((0,rW.Mixin)(rE,rA,r_,rw,rK));var rY=P(require("pusher-js"));global.Pusher=rY.default;var rX=function(){function e(t){var n=t.api;o(this,e);this.layers=[];this._api=n}u(e,[{key:"addAsset",value:function e(e){var t=this;return i(function(){return L(this,function(n){return[2,new Promise(function(){var n=i(function(n,r){var i,o,a;return L(this,function(u){switch(u.label){case 0:u.trys.push([0,2,,3]);i=th([[tm(e),e],["sync","true"]]);return[4,t._api.post({data:i,isForm:!0,url:H.assets})];case 1:o=u.sent();n(o);return[3,3];case 2:a=u.sent();throw f(a,Error)&&console.error(a),r(a),a;case 3:return[2]}})});return function(e,t){return n.apply(this,arguments)}}())]})})()}},{key:"getAllAssets",get:function e(){return""}}]);return e}();global.Pusher=rh.default;var rJ=function(){function e(t){var n=t.api,r=t.develop,i=r===void 0?!1:r,a=t.formData,u=t.host,s=t.options,l=t.temporaryDirectory,c=t.videos;var f=this;o(this,e);this.layers=[];this._identifiedLayers=[];this._api=n,this._develop=i,this._files=[],this._formData=a,this._host=u,this._options=s,this._temporaryDirectory=l!==null&&l!==void 0?l:tl(),this._videos=c,tO(function(){return t3(f._options)})}u(e,[{key:"backgroundColor",get:function e(){return this._options.backgroundColor}},{key:"dimensions",get:function e(){return this._options.dimensions}},{key:"duration",get:function e(){return this._options.duration}},{key:"extension",get:function e(){return this._options.extension}},{key:"metadata",get:function e(){return this._options.metadata}},{key:"identifiedLayers",get:function e(){return this._identifiedLayers}},{key:"addLayer",value:function e(e){this.layers.push(e)}},{key:"layer",value:function e(e){return this._identifiedLayers.find(function(t){return t.id&&t.id===e})}},{key:"getLayerAttribute",value:function e(e){var t=e.childKey,n=e.id,r=e.layerKey;var i=this._identifiedLayers.find(function(e){return e.id===n})[r];return t?i[t]:i}},{key:"setLayerAttribute",value:function e(e){var t=e.childKey,n=e.id,r=e.layerKey,i=e.value;var o=eO(this.layer(n));t?o[r][t]=i:o[r]=i,this.setLayer(n,o)}},{key:"addAudio",value:function e(e,t,n){var r=this;return i(function(){var o;return L(this,function(a){o=r._setLayerDefaults({layerConfig:n,layerType:V.LayerType.audio,options:t});return[2,tI(function(){t1("addAudio",e),tK("addAudio",V.AudioKey,t),nh("addAudio",o),t2("addAudio",e)},i(function(){var t,n,i,a,u,s,l;return L(this,function(c){switch(c.label){case 0:t=typeof e=="string"?e:void 0,n=r._addIdentifiedLayer(v({type:V.LayerType.audio},o),t),i=n.id;return[4,n3(e,r._temporaryDirectory)];case 1:a=c.sent(),u=a.filepath,s=a.readStream;return[4,n4(o,"addVideo",u,t)];case 2:c.sent();l=new rL({composition:r,id:i});return[2,(r._files.push({file:s,id:i}),r.addLayer(l),l)]}})}))]})})()}},{key:"addFilter",value:function e(e){var t=this;var n=this._setLayerDefaults({layerType:V.LayerType.filter,options:e});return tO(function(){tx(e,eg.optionsRequired),tK("addFilter",V.FilterKey,e),nS("addFilter",n)},function(){var e=t._addIdentifiedLayer(v({type:V.LayerType.filter},n)),r=e.id,i=new rk({composition:t,id:r});return t.addLayer(i),i})}},{key:"addEffect",value:function e(e){var t=this;var n=this._setLayerDefaults({layerType:V.LayerType.effect,options:e});return tO(function(){tx(e,eg.optionsRequired),tK("addEffect",V.EffectKey,e),nT("addEffect",n)},function(){var e=t._addIdentifiedLayer(v({type:V.LayerType.effect},n)),r=e.id,i=new rx({composition:t,id:r});return t.addLayer(i),i})}},{key:"addGroup",value:function e(e,t){var n=this;var r=this._setLayerDefaults({layerConfig:t,layerType:V.LayerType.group});return tO(function(){nE("addGroup",r)},function(){e.map(function(e){return n6(e,t)});var i=n._addIdentifiedLayer(v({type:V.LayerType.group},r)),o=i.id;return new rD({composition:n,id:o,layers:e})})}},{key:"addHtml",value:function e(e,t){var n=this;return i(function(){var r;return L(this,function(o){switch(o.label){case 0:r=n._setLayerDefaults({layerConfig:t,layerType:V.LayerType.html,options:e});return[4,tI(function(){tx(e,eg.optionsRequired),tK("addHtml",V.HtmlKey,e),nz("addHtml",r),nP({layer:r})},i(function(){var e,t,i;return L(this,function(o){e=n._addIdentifiedLayer(v({type:V.LayerType.html},r)),t=e.id,i=new rO({composition:n,id:t});return[2,(n.addLayer(i),i)]})}))];case 1:return[2,o.sent()]}})})()}},{key:"addImage",value:function e(e,t){var n=this;return i(function(){var r;return L(this,function(o){r=n._setLayerDefaults({layerConfig:t,layerType:V.LayerType.image});return[2,tI(function(){t1("addImage",e),nR("addImage",r),t2("addImage",e)},i(function(){var t,i,o,a,u,s;return L(this,function(l){switch(l.label){case 0:t=typeof e=="string"?e:void 0,i=n._addIdentifiedLayer(v({type:V.LayerType.image},r),t),o=i.id;return[4,n3(e,n._temporaryDirectory)];case 1:a=l.sent(),u=a.readStream,s=new rP({composition:n,id:o});return[2,(n._files.push({file:u,id:o}),n.addLayer(s),s)]}})}))]})})()}},{key:"addLottie",value:function e(e,t){var n=this;var r=this._setLayerDefaults({layerConfig:t,layerType:V.LayerType.lottie,options:e});return tO(function(){tx(e,eg.optionsRequired),tK("addLottie",V.LottieKey,e),nU("addLottie",r)},function(){var e=n._addIdentifiedLayer(v({type:V.LayerType.lottie},r)),t=e.id,i=new rR({composition:n,id:t});return n.addLayer(i),i})}},{key:"addSequence",value:function e(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{timeline:{start:0}};var n=this;return i(function(){var r;return L(this,function(o){switch(o.label){case 0:r=n._setLayerDefaults({layerConfig:t,layerType:V.LayerType.sequence});return[4,tI(function(){nC("addSequence",r)},i(function(){var t,o,a,u;return L(this,function(s){switch(s.label){case 0:return[4,Promise.all(e.map(function(){var e=i(function(e){var t,r,i,o,a,u,s,l;return L(this,function(c){switch(c.label){case 0:t=n._file(e.id);if(!t)return[3,7];return[4,n3(t.file,n._temporaryDirectory)];case 1:o=c.sent(),a=o.filepath,u=td(a);i=a;if(!nZ(u))return[3,3];return[4,n._getMetadata(a)];case 2:s=r=c.sent();return[3,6];case 3:l=nQ(u);if(!l)return[3,5];return[4,n._getMetadata(a)];case 4:l=r=c.sent();c.label=5;case 5:s=l;c.label=6;case 6:s;c.label=7;case 7:return[2,{duration:r?r.duration:void 0,filepath:i,layer:e}]}})});return function(t){return e.apply(this,arguments)}}()))];case 1:t=s.sent(),o=r.timeline.start||0;t.map(function(e,r){var i=e.duration,a=e.filepath,u=e.layer;var s=u.type;if(V.LayerKey.timeline in u){var l=u.timeline,c=l.start,f=c===void 0?0:c;f&&(o=f)}var d=r>0?t[r-1].layer:void 0,y=r<t.length-1?t[r+1].layer:void 0;if(o=n5(o,u,d,y),a&&n._setFile(u.id,ts(a)),s===V.LayerType.group&&u.setStart(o),V.LayerKey.trim in u){var v=u.trim,p=v.end,h=v.start,m=h===void 0?0:h;if(p)o+=p-m;else if(i)o+=i-m;else throw new Error(eg.trimEndRequired(s))}else if(i)o=i;else throw new Error(eg.trimEndRequired(s))}),n._setDuration(o);a=n._addIdentifiedLayer(v({type:V.LayerType.sequence},r)),u=a.id;return[2,new rU({composition:n,id:u,layers:e})]}})}))];case 1:return[2,o.sent()]}})})()}},{key:"addSubtitles",value:function e(e,t,n){var r=this;return i(function(){var o;return L(this,function(a){o=r._setLayerDefaults({layerConfig:n,layerType:V.LayerType.subtitles,options:t});return[2,tI(function(){t1("addSubtitles",e),tK("addSubtitles",V.SubtitlesKey,t),nq("addSubtitles",o),t2("addSubtitles",e)},i(function(){var t,n,i,a,u,s,l,c;return L(this,function(f){switch(f.label){case 0:t=o.subtitles,n=t.backgroundColor,i=t.color,a=eO(o);a.subtitles.backgroundColor=eA(n),a.subtitles.color=eA(i);u=r._addIdentifiedLayer(v({type:V.LayerType.subtitles},a)),s=u.id;return[4,n3(e,r._temporaryDirectory)];case 1:l=f.sent(),c=l.readStream;return[2,(r._files.push({file:c,id:s}),new rB({composition:r,id:s}))]}})}))]})})()}},{key:"addText",value:function e(e,t){var n=this;var r=this._setLayerDefaults({layerConfig:t,layerType:V.LayerType.text,options:e});return tO(function(){tx(e,eg.optionsRequired),tx(e.text,eg.textRequired),tK("addText",V.TextKey,e),nY("addText",r)},function(){var e=r.text,t=e.backgroundColor,i=e.color,o=e.fontSize,a=e.fontStyle,u=e.fontWeight,s=e.padding,l=e.tailwind,c=e.textAlign,f=e.textDecoration,d=eO(r);d.text.backgroundColor=eA(t),d.text.color=eA(i),l&&l.length>0&&(d.text.tailwind=(0,rm.twMerge)("text-[".concat(i,"] text-[").concat(o,"px] bg-[").concat(t,"] p-[").concat(s,"px] ").concat(a," font-[").concat(u,"] text-").concat(c," ").concat(f," "),l));var y=n._addIdentifiedLayer(v({type:V.LayerType.text},d)),p=y.id,h=new rN({composition:n,id:p});return n.addLayer(h),h})}},{key:"addVideo",value:function e(e,t){var n=this;return i(function(){var r;return L(this,function(o){r=n._setLayerDefaults({layerConfig:t,layerType:V.LayerType.video});return[2,tI(function(){t1("addVideo",e),nX("addVideo",r),t2("addVideo",e)},i(function(){var t,i,o,a,u,s,l;return L(this,function(c){switch(c.label){case 0:t=typeof e=="string"?e:void 0,i=n._addIdentifiedLayer(v({type:V.LayerType.video},r),t),o=i.id,a=new rV({composition:n,id:o});return[4,n3(e,n._temporaryDirectory)];case 1:u=c.sent(),s=u.filepath,l=u.readStream;return[4,n4(r,"addVideo",s,t)];case 2:return[2,(c.sent(),n.addLayer(a),n._files.push({file:l,id:o}),a)]}})}))]})})()}},{key:"addWaveform",value:function e(e,t,n){var r=this;return i(function(){var o;return L(this,function(a){o=r._setLayerDefaults({layerConfig:n,layerType:V.LayerType.waveform,options:t});return[2,tI(function(){tK("addWaveform",V.WaveformKey,t),nG("addWaveform",o),e?t1("addWaveform",e):t2("addWaveform",e)},i(function(){var t,n,i,a,u,s,l,c,f,d,y,p;return L(this,function(h){switch(h.label){case 0:t=o.waveform,n=t.backgroundColor,i=t.color,a=t.secondaryColor,u=a===void 0?V.Color.transparent:a,s=eO(o);s.waveform.backgroundColor=eA(n),s.waveform.color=eA(i),s.waveform.secondaryColor=eA(u);l=typeof e=="string"?e:void 0,c=r._addIdentifiedLayer(v({type:V.LayerType.waveform},s),l),f=c.id,d=new rM({composition:r,id:f});if(!e)return[3,2];return[4,n3(e,r._temporaryDirectory)];case 1:y=h.sent(),p=y.readStream;r._files.push({file:p,id:f});h.label=2;case 2:return[2,(r.addLayer(d),d)]}})}))]})})()}},{key:"encode",value:function e(e){var t=this;return i(function(){var n;return L(this,function(r){t._encodeOptions=e;return[2,tI(function(){tx(t.duration,eg.durationRequired)},i(function(){var e,r,o,a,u,s,l,c;return L(this,function(f){switch(f.label){case 0:r=new Date;if(!((e=t._encodeOptions)===null||e===void 0?void 0:e.experimental))return[3,3];t._develop&&(n=(0,rv.default)("Uploading video configuration and assets").start());o=new rX({api:t._api,develop:t._develop,formData:new rf.default,host:t._host}),a=t.identifiedLayers.map(function(){var e=i(function(e){return L(this,function(t){return[2,new Promise(function(){var t=i(function(t,n){var r,i,a;return L(this,function(u){switch(u.label){case 0:if(!e.file)return[3,4];u.label=1;case 1:u.trys.push([1,3,,4]);return[4,o.addAsset(e.file)];case 2:r=u.sent(),i=r.id;e.assetId=i,t(e);return[3,4];case 3:a=u.sent();n(a);return[3,4];case 4:return[2,t(e)]}})});return function(e,n){return t.apply(this,arguments)}}())]})});return function(t){return e.apply(this,arguments)}}());return[4,Promise.all(a)];case 1:u=f.sent();t._processDynamicTransitions();s=new Date;return[4,t._api.post({data:{config:h(v({},t._options),{layers:u})},isForm:!1,url:H.videos.new})];case 2:l=f.sent();return[2,(t._develop&&n.succeed("Assets uploaded in ".concat((0,rp.default)(s.getTime()-r.getTime()))),tJ(l,{invalidDataError:eg.malformedEncodingResponse,validate:tq}))];case 3:t._processDynamicTransitions(),t.prepareFormData();return[4,t._api.post({data:t._formData,isForm:!0,url:H.videos.create})];case 4:c=f.sent();return[2,tJ(c,{invalidDataError:eg.malformedEncodingResponse,validate:tq})];case 5:return[2]}})}),function(){return ty(t._temporaryDirectory)})]})})()}},{key:"encodeSync",value:function e(e){var t=this;return i(function(){var n,r,o,a,u,s,l,c,f,d,y;return L(this,function(p){switch(p.label){case 0:u=new URL(t._host),s={broadcaster:"pusher",cluster:"us2",forceTLS:!0};u.host.includes(".com")?s=Object.assign({},s,{key:"5351148cb5f7e6a2c18e"}):s=Object.assign({},s,{key:"133dac3e22bd7f3f7f18"});l=new rd.default(v({authorizer:function(e){return{authorize:function(n,r){var i=new rf.default,o=new URL(t._host);o.pathname=H.ws.auth,i.append("channel_name",e.name),i.append("socket_id",n),t._api.post({data:i,isForm:!0,url:o.toString()}).then(function(e){r(!1,e)}).catch(function(e){r(!0,e)})}}}},s));if(!(t._develop&&(e===null||e===void 0?void 0:e.experimental)===void 0&&(o=(0,rv.default)("Uploading video configuration and assets").start()),!((n=t._encodeOptions)===null||n===void 0?void 0:n.experimental)))return[3,4];p.label=1;case 1:p.trys.push([1,3,,4]);c=new Date;return[4,t.encode(e)];case 2:r=p.sent();f=new Date;t._develop&&(e===null||e===void 0?void 0:e.experimental)===void 0&&o.succeed("Assets uploaded in ".concat((0,rp.default)(f.getTime()-c.getTime())));return[3,4];case 3:d=p.sent();throw t._develop&&(e===null||e===void 0?void 0:e.experimental)!==void 0&&o.fail("Upload failed"),d;case 4:y=new Date;t._develop&&(a=(0,rv.default)("Encoding video").start());return[4,new Promise(function(e,n){l.private("App.Models.Video.".concat(r.id)).notification(function(){var o=i(function(i){var o,u,s;return L(this,function(c){switch(c.label){case 0:if(!(l.disconnect(),["video.encoded","video.processed"].includes(i.type)))return[3,3];if(!t._develop)return[3,2];o=new Date(i.timestamp*1e3),u=(0,rp.default)(o.getTime()-y.getTime());a.succeed("Video encoded in ".concat(u));return[4,(0,ry.default)(i.stream_url)];case 1:c.sent();c.label=2;case 2:e();return[3,4];case 3:if(i.type==="video.failed"){s=eg.videoEncodingFailed(r.id);t._develop?a.fail(s):n(s)}c.label=4;case 4:return[2]}})});return function(e){return o.apply(this,arguments)}}())})];case 5:p.sent();return[4,t._videos.get({id:r.id})];case 6:return[2,p.sent()]}})})()}},{key:"preview",value:function e(){var e=this;return i(function(){return L(this,function(t){switch(t.label){case 0:return[4,rr(JSON.stringify(h(v({},e._options),{files:e._files,layers:e._identifiedLayers})))];case 1:t.sent();return[2]}})})()}},{key:"_addIdentifiedLayer",value:function e(e,t){var n=eI({file:t,id:ta()},e);return this._identifiedLayers.push(n),n}},{key:"_processDynamicTransitions",value:function e(){var e=this;return tO(function(){nd(e._identifiedLayers)},function(){e.layers.forEach(function(e){V.LayerKey.transitions in e&&e.transitions.length&&e.transitions.forEach(function(t){t.type===V.TransitionType.kenBurns&&n7(h(v({},t.options),{layer:e})),e.setTransitions(e.transitions.filter(function(e){return e.type!==V.TransitionType.kenBurns}))})})})}},{key:"generateConfig",value:function e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;var t=h(v({},this._options),{layers:this._nonUtilLayers()});return e?JSON.stringify(t):t}},{key:"prepareFormData",value:function e(){var e=this;var t;this._files.forEach(function(t){var n=t.file,r=t.id;return e._formData.append(n1(n,r),n)}),this._formData.append("config",JSON.stringify(h(v({},this._options),{layers:this._nonUtilLayers()}))),((t=this._encodeOptions)===null||t===void 0?void 0:t.experimental)&&this._formData.append("experimental",JSON.stringify(this._encodeOptions.experimental))}},{key:"_nonUtilLayers",value:function e(){return this._identifiedLayers.filter(function(e){return![V.LayerType.group,V.LayerType.sequence].includes(e.type)}).sort(n8)}},{key:"_getMetadata",value:function e(e){return i(function(){var t;return L(this,function(n){switch(n.label){case 0:t={};return[4,n9(e)];case 1:return[2,(t.duration=n.sent(),t)]}})})()}},{key:"_file",value:function e(e){return this._files.find(function(t){return t.id&&t.id===e})}},{key:"_setDuration",value:function e(e){this._options.duration=e}},{key:"_setFile",value:function e(e,t){this._files.find(function(t){return t.id===e}).file=t}},{key:"setLayer",value:function e(e,t){var n=eO(this.identifiedLayers),r=n.findIndex(function(t){return t.id===e});n[r]=t,this._identifiedLayers=n}},{key:"_setLayerDefaults",value:function e(e){var t=e.layerConfig,n=e.layerType,r=e.options;return n2(this._options.dimensions,n,r,t)}}]);return e}();var rG=function(){function e(t){var n=t.api,r=t.develop,i=r===void 0?!1:r,a=t.host;o(this,e);this._api=n,this._develop=i,this._host=a}u(e,[{key:"all",value:function e(e,t){var n=this;return i(function(){var r,i;return L(this,function(o){switch(o.label){case 0:o.trys.push([0,2,,3]);return[4,n._api.get({url:ti(H.videos.all,e,t)})];case 1:r=o.sent();return[2,tJ(r,{invalidDataError:e_.malformedResponse,validate:tH}).data];case 2:i=o.sent();f(i,Error)&&console.error(e_.all(i.message));return[3,3];case 3:return[2,[]]}})})()}},{key:"get",value:function e(e){var t=e.id;var n=this;return i(function(){var e,r;return L(this,function(i){switch(i.label){case 0:i.trys.push([0,2,,3]);return[4,n._api.get({url:tt(H.videos.get,{id:t})})];case 1:e=i.sent();return[2,tJ(e,{invalidDataError:e_.malformedResponse,validate:tN})];case 2:r=i.sent();f(r,Error)&&console.error(e_.get(r.message));return[3,3];case 3:return[2]}})})()}},{key:"new",value:function e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{backgroundColor:V.Color.black,extension:V.VideoExtensions.mp4,fps:30},t=arguments.length>1?arguments[1]:void 0;var n=this;return i(function(){return L(this,function(r){return[2,tI(function(){tY(e),t&&t1("new",t)},i(function(){var r,i,o,a,u,s,l,c,f,d,y,p,m,g,b,T,_,w;return L(this,function(K){switch(K.label){case 0:if(!t)return[3,4];i=tl();return[4,n3(t,i)];case 1:o=K.sent(),a=o.filepath,u=o.readStream;return[4,n._getMetadata(u)];case 2:s=K.sent(),l=s.duration,c=s.fps,f=s.height,d=s.width,y=eO(e);y.backgroundColor=eA(e.backgroundColor||V.Color.black),r=new rJ({api:n._api,develop:n._develop,formData:new rc.default,host:n._host,options:h(v({},y),{dimensions:{height:f,width:d},duration:l,fps:c}),temporaryDirectory:i,videos:n});return[4,r.addVideo(ts(a))];case 3:K.sent();return[3,5];case 4:p=e.backgroundColor,m=e.dimensions,g=e.duration,b=e.extension,T=e.filename,_=e.fps,w=e.metadata;r=new rJ({api:n._api,develop:n._develop,formData:new rc.default,host:n._host,options:{backgroundColor:eA(p||V.Color.black),dimensions:m,duration:g,extension:b,filename:T,fps:_,metadata:w},videos:n});K.label=5;case 5:return[2,r]}})}))]})})()}},{key:"_getMetadata",value:function e(e){var t=this;return i(function(){var n,r;return L(this,function(i){switch(i.label){case 0:n=th([[tm(e),e],["type","video"]]);return[4,t._api.post({data:n,isForm:!0,url:H.metadata})];case 1:r=i.sent();return[2,tJ(r,{invalidDataError:e_.malformedResponse,validate:tM})]}})})()}}]);return e}();var rQ=function(){function e(t){var n=t.develop,r=n===void 0?!1:n,i=t.host,a=i===void 0?U:i,u=t.token,s=t.version,l=s===void 0?2:s;o(this,e);this._api=new ri({fetch:eL(eK(a,l)),host:a,token:u,version:l}),this._host=a,this._token=u,this._version=l,this.applications=new ro(this._api),this.videos=new rG({api:this._api,develop:r,host:this._host}),this.flows=new rl({api:this._api,develop:r,host:this._host})}u(e,[{key:"host",get:function e(){return this._host}},{key:"token",get:function e(){return this._token}},{key:"version",get:function e(){return this._version}}]);return e}(),rZ=N;0&&(module.exports={CommonResolutions:CommonResolutions,Editframe:Editframe});